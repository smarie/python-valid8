


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-5.1.1">
    
    
      
        <title>valid8 + other tools - valid8</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.a676eddb.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#valid8-other-tools" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="valid8" class="md-header-nav__button md-logo" aria-label="valid8">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,8A3,3 0 0,0 15,5A3,3 0 0,0 12,2A3,3 0 0,0 9,5A3,3 0 0,0 12,8M12,11.54C9.64,9.35 6.5,8 3,8V19C6.5,19 9.64,20.35 12,22.54C14.36,20.35 17.5,19 21,19V8C17.5,8 14.36,9.35 12,11.54Z" /></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" /></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            valid8
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              valid8 + other tools
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" /></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/smarie/python-valid8/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="valid8" class="md-nav__button md-logo" aria-label="valid8">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,8A3,3 0 0,0 15,5A3,3 0 0,0 12,2A3,3 0 0,0 9,5A3,3 0 0,0 12,8M12,11.54C9.64,9.35 6.5,8 3,8V19C6.5,19 9.64,20.35 12,22.54C14.36,20.35 17.5,19 21,19V8C17.5,8 14.36,9.35 12,11.54Z" /></svg>

    </a>
    valid8
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/smarie/python-valid8/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home and usage" class="md-nav__link">
      Home and usage
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../why_validation/" title="Why validation" class="md-nav__link">
      Why validation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Validation functions
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Validation functions" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Validation functions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../validation_funcs/a_basics/" title="Basics" class="md-nav__link">
      Basics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../validation_funcs/b_base_validation_lib/" title="Built-in validation functions" class="md-nav__link">
      Built-in validation functions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../validation_funcs/c_simple_syntax/" title="Simple syntax" class="md-nav__link">
      Simple syntax
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../validation_funcs/d_composition/" title="Composition framework" class="md-nav__link">
      Composition framework
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        valid8 + other tools
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,9H17V7H3V9M3,13H17V11H3V13M3,17H17V15H3V17M19,17H21V15H19V17M19,7V9H21V7H19M19,13H21V11H19V13Z" /></svg>
        </span>
      </label>
    
    <a href="./" title="valid8 + other tools" class="md-nav__link md-nav__link--active">
      valid8 + other tools
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#other-validation-styles" class="md-nav__link">
    Other validation styles
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#for-functions-and-classes" class="md-nav__link">
    For functions and classes
  </a>
  
    <nav class="md-nav" aria-label="For functions and classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pep484-type-checkers" class="md-nav__link">
    PEP484 type checkers
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#for-classes" class="md-nav__link">
    For classes
  </a>
  
    <nav class="md-nav" aria-label="For classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyfields" class="md-nav__link">
    pyfields
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#autoclass" class="md-nav__link">
    autoclass
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#attrs" class="md-nav__link">
    attrs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Examples/Recipes
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Examples/Recipes" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Examples/Recipes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/example1/" title="Example 1" class="md-nav__link">
      Example 1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/example2/" title="Example 2" class="md-nav__link">
      Example 2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/example3/" title="Example 3" class="md-nav__link">
      Example 3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/example4/" title="Example 4" class="md-nav__link">
      Example 4
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../examples/example5/" title="Example 5" class="md-nav__link">
      Example 5
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../other_libs/" title="Other validation libs" class="md-nav__link">
      Other validation libs
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../api_reference/" title="API reference" class="md-nav__link">
      API reference
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../changelog/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#other-validation-styles" class="md-nav__link">
    Other validation styles
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#for-functions-and-classes" class="md-nav__link">
    For functions and classes
  </a>
  
    <nav class="md-nav" aria-label="For functions and classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pep484-type-checkers" class="md-nav__link">
    PEP484 type checkers
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#for-classes" class="md-nav__link">
    For classes
  </a>
  
    <nav class="md-nav" aria-label="For classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pyfields" class="md-nav__link">
    pyfields
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#autoclass" class="md-nav__link">
    autoclass
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#attrs" class="md-nav__link">
    attrs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/smarie/python-valid8/edit/master/docs/valid8_with_other.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z" /></svg>
                  </a>
                
                
                  
                
                
                <h1 id="valid8-other-tools"><code>valid8</code> + other tools<a class="headerlink" href="#valid8-other-tools" title="Permanent link">&para;</a></h1>
<h2 id="other-validation-styles">Other validation styles<a class="headerlink" href="#other-validation-styles" title="Permanent link">&para;</a></h2>
<p>The <a href="https://pypi.org/project/checktypes/">checktypes</a> package provides a way to easily embed your validation requirements as classes, for easy reuse.</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">valid8</span> <span class="kn">import</span> <span class="n">validate</span>
<span class="kn">from</span> <span class="nn">checktypes</span> <span class="kn">import</span> <span class="n">checktype</span>
<span class="n">PositiveInt</span> <span class="o">=</span> <span class="n">checktype</span><span class="p">(</span><span class="s1">&#39;PositiveInt&#39;</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>

<span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">validate</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">custom</span><span class="o">=</span><span class="n">PositiveInt</span><span class="o">.</span><span class="n">validate</span><span class="p">)</span>

<span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="n">validate</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">custom</span><span class="o">=</span><span class="n">PositiveInt</span><span class="o">.</span><span class="n">validate</span><span class="p">)</span>  <span class="c1"># ValidationError</span>
</code></pre></div>


<h2 id="for-functions-and-classes">For functions and classes<a class="headerlink" href="#for-functions-and-classes" title="Permanent link">&para;</a></h2>
<h3 id="pep484-type-checkers">PEP484 type checkers<a class="headerlink" href="#pep484-type-checkers" title="Permanent link">&para;</a></h3>
<p>Although simple type validation may be performed using <code>valid8</code>, for function inputs/outputs type validation as well as class field type validation you may wish to rely on a proper PEP484 type checker such as <a href="https://github.com/RussBaz/enforce">enforce</a> or <a href="https://github.com/Stewori/pytypes">pytypes</a>.</p>
<p>The following snippet shows a <code>build_house</code> function with two inputs <code>name</code> and <code>surface</code>, where each input is:</p>
<ul>
<li>validated against the expected type thanks to the PEP484 type checking library (<a href="https://github.com/RussBaz/enforce">enforce</a> in this example)</li>
<li>further value-validated with valid8 (<code>len(name) &gt; 0</code> and <code>surface &gt;= 0</code>), with the help of the <code>mini_lambda</code> syntax.</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="c1"># Imports - for type validation</span>
<span class="kn">from</span> <span class="nn">numbers</span> <span class="kn">import</span> <span class="n">Integral</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Optional</span>
<span class="kn">from</span> <span class="nn">enforce</span> <span class="kn">import</span> <span class="n">runtime_validation</span><span class="p">,</span> <span class="n">config</span>
<span class="n">config</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;covariant&#39;</span><span class="p">))</span>  <span class="c1"># type validation will accept subclasses too</span>

<span class="c1"># Imports - for value validation</span>
<span class="kn">from</span> <span class="nn">mini_lambda</span> <span class="kn">import</span> <span class="n">s</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">Len</span>
<span class="kn">from</span> <span class="nn">valid8</span> <span class="kn">import</span> <span class="n">validate_arg</span><span class="p">,</span> <span class="n">is_multiple_of</span><span class="p">,</span> <span class="n">InputValidationError</span>

<span class="c1"># Define our 2 applicative error types</span>
<span class="k">class</span> <span class="nc">InvalidNameError</span><span class="p">(</span><span class="n">InputValidationError</span><span class="p">):</span>
    <span class="n">help_msg</span> <span class="o">=</span> <span class="s1">&#39;name should be a non-empty string&#39;</span>

<span class="k">class</span> <span class="nc">InvalidSurfaceError</span><span class="p">(</span><span class="n">InputValidationError</span><span class="p">):</span>
    <span class="n">help_msg</span> <span class="o">=</span> <span class="s1">&#39;Surface should be a multiple of 100 between 0 and 10000.&#39;</span>

<span class="c1"># Apply type + value validation</span>
<span class="nd">@runtime_validation</span>
<span class="nd">@validate_arg</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">Len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">error_type</span><span class="o">=</span><span class="n">InvalidNameError</span><span class="p">)</span>
<span class="nd">@validate_arg</span><span class="p">(</span><span class="s1">&#39;surface&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">10000</span><span class="p">),</span> <span class="n">is_multiple_of</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
              <span class="n">error_type</span><span class="o">=</span><span class="n">InvalidSurfaceError</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">build_house</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">surface</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Integral</span><span class="p">]</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> \
        <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Integral</span><span class="p">]]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Building house... DONE !&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">name</span><span class="p">,</span> <span class="n">surface</span>
</code></pre></div>


<p>We can test that validation works:</p>
<div class="codehilite"><pre><span></span><code>&gt; build_house<span class="o">(</span><span class="s1">&#39;sweet home&#39;</span>, <span class="m">200</span><span class="o">)</span>    <span class="c1"># valid</span>
&gt; build_house<span class="o">(</span><span class="s1">&#39;sweet home&#39;</span><span class="o">)</span>         <span class="c1"># valid (PEP484 Optional, default=None)</span>

&gt; build_house<span class="o">(</span><span class="s1">&#39;&#39;</span>, <span class="m">100</span><span class="o">)</span>              <span class="c1"># InvalidNameError (valid8)</span>
&gt; build_house<span class="o">(</span><span class="s1">&#39;sweet home&#39;</span>, <span class="m">10000</span><span class="o">)</span>  <span class="c1"># InvalidSurfaceError (valid8)</span>
&gt; build_house<span class="o">(</span><span class="s1">&#39;test&#39;</span>, <span class="m">100</span>.1<span class="o">)</span>        <span class="c1"># RuntimeTypeError (enforce)</span>
</code></pre></div>


<p><strong>Note concerning PEP484 type validation</strong>: how can you make sure to accept both plain old <code>float</code>, <code>int</code> and <code>bool</code>, as well as their <code>numpy</code> equivalents ? Use the handy <code>Real</code> (=float) and <code>Integral</code> (=int) abstract numeric types provided in the <a href="https://docs.python.org/3.6/library/numbers.html"><code>numbers</code></a> built-in module ! They provide an easy way to support both python primitives AND others, e.g. numpy primitives. </p>
<p>Unfortunately no equivalent type is provided in the stdlib for booleans, so in <code>valid8</code> we provide an additional <code>Boolean</code> class supporting numpy, to complete the picture.</p>
<h2 id="for-classes">For classes<a class="headerlink" href="#for-classes" title="Permanent link">&para;</a></h2>
<h3 id="pyfields">pyfields<a class="headerlink" href="#pyfields" title="Permanent link">&para;</a></h3>
<p><strong>TODO</strong></p>
<h3 id="autoclass">autoclass<a class="headerlink" href="#autoclass" title="Permanent link">&para;</a></h3>
<p><code>valid8</code> plays well with <a href="https://smarie.github.io/python-autoclass/">autoclass</a> to quickly create small but validated classes: </p>
<p>If you decorate <strong>the whole class</strong> with <code>@validate_field</code> the property setters generated by <code>@autoclass</code> will include validation, as expected:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">autoclass</span> <span class="kn">import</span> <span class="n">autoclass</span>
<span class="kn">from</span> <span class="nn">mini_lambda</span> <span class="kn">import</span> <span class="n">s</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">Len</span>
<span class="kn">from</span> <span class="nn">valid8</span> <span class="kn">import</span> <span class="n">validate_arg</span><span class="p">,</span> <span class="n">instance_of</span><span class="p">,</span> <span class="n">is_multiple_of</span>

<span class="k">class</span> <span class="nc">InvalidNameError</span><span class="p">(</span><span class="n">ClassFieldValidationError</span><span class="p">):</span>
    <span class="n">help_msg</span> <span class="o">=</span> <span class="s1">&#39;name should be a non-empty string&#39;</span>

<span class="k">class</span> <span class="nc">InvalidSurfaceError</span><span class="p">(</span><span class="n">ClassFieldValidationError</span><span class="p">):</span>
    <span class="n">help_msg</span> <span class="o">=</span> <span class="s1">&#39;Surface should be a multiple of 100 between 0 and 10000.&#39;</span>

<span class="nd">@validate_field</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">instance_of</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span> <span class="n">Len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">error_type</span><span class="o">=</span><span class="n">InvalidNameError</span><span class="p">)</span>
<span class="nd">@validate_field</span><span class="p">(</span><span class="s1">&#39;surface&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">10000</span><span class="p">),</span> <span class="n">is_multiple_of</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span> 
                <span class="n">error_type</span><span class="o">=</span><span class="n">InvalidSurfaceError</span><span class="p">)</span>
<span class="nd">@autoclass</span>
<span class="k">class</span> <span class="nc">House</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">surface</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">pass</span>
</code></pre></div>


<p>which yields:</p>
<div class="codehilite"><pre><span></span><code>&gt; <span class="nv">h</span> <span class="o">=</span> House<span class="o">(</span><span class="s1">&#39;sweet home&#39;</span>, <span class="m">200</span><span class="o">)</span>
&gt; h.surface <span class="o">=</span> None   <span class="c1"># Valid (surface is nonable by signature)</span>

&gt; h.name <span class="o">=</span> <span class="s1">&#39;&#39;</span>        <span class="c1"># InvalidNameError</span>
&gt; h.surface <span class="o">=</span> <span class="m">10000</span>  <span class="c1"># InvalidSurfaceError</span>
</code></pre></div>


<p>Note: if you decorate <strong>the class constructor</strong> with <code>@validate_arg</code>, the property setters generated by <code>@autoclass</code> will include validation too. </p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">autoclass</span> <span class="kn">import</span> <span class="n">autoclass</span>
<span class="kn">from</span> <span class="nn">mini_lambda</span> <span class="kn">import</span> <span class="n">s</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">Len</span>
<span class="kn">from</span> <span class="nn">valid8</span> <span class="kn">import</span> <span class="n">validate_arg</span><span class="p">,</span> <span class="n">instance_of</span><span class="p">,</span> <span class="n">is_multiple_of</span><span class="p">,</span> <span class="n">InputValidationError</span>

<span class="k">class</span> <span class="nc">InvalidNameError</span><span class="p">(</span><span class="n">InputValidationError</span><span class="p">):</span>
    <span class="n">help_msg</span> <span class="o">=</span> <span class="s1">&#39;name should be a non-empty string&#39;</span>

<span class="k">class</span> <span class="nc">InvalidSurfaceError</span><span class="p">(</span><span class="n">InputValidationError</span><span class="p">):</span>
    <span class="n">help_msg</span> <span class="o">=</span> <span class="s1">&#39;Surface should be a multiple of 100 between 0 and 10000.&#39;</span>

<span class="nd">@autoclass</span>
<span class="k">class</span> <span class="nc">House</span><span class="p">:</span>

    <span class="nd">@validate_arg</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">instance_of</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span> <span class="n">Len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> 
                  <span class="n">error_type</span><span class="o">=</span><span class="n">InvalidNameError</span><span class="p">)</span>
    <span class="nd">@validate_arg</span><span class="p">(</span><span class="s1">&#39;surface&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">10000</span><span class="p">),</span> <span class="n">is_multiple_of</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span> 
                  <span class="n">error_type</span><span class="o">=</span><span class="n">InvalidSurfaceError</span><span class="p">)</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">surface</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">pass</span>
</code></pre></div>


<p>which yields:</p>
<div class="codehilite"><pre><span></span><code>&gt; <span class="nv">h</span> <span class="o">=</span> House<span class="o">(</span><span class="s1">&#39;sweet home&#39;</span>, <span class="m">200</span><span class="o">)</span>
&gt; h.surface <span class="o">=</span> None   <span class="c1"># Valid (surface is nonable by signature)</span>
&gt; h.name <span class="o">=</span> <span class="s1">&#39;&#39;</span>        <span class="c1"># InvalidNameError</span>
&gt; h.surface <span class="o">=</span> <span class="m">10000</span>  <span class="c1"># InvalidSurfaceError</span>
</code></pre></div>


<p>Of course you can also add PEP484 type checking on top of that, see <a href="https://smarie.github.io/python-autoclass/">autoclass documentation</a> for details.</p>
<h3 id="attrs">attrs<a class="headerlink" href="#attrs" title="Permanent link">&para;</a></h3>
<p><code>valid8</code> also integrates well with <a href="http://www.attrs.org/en/stable/">attrs</a> to quickly create small but validated classes: if you decorate a class with <code>@validate_field</code> it will work because <code>attrs</code> generates a compliant class constructor behind the scenes. However WARNING validation will only be called at initial object creation, not at subsequent field modifications!</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">attr</span>
<span class="kn">from</span> <span class="nn">mini_lambda</span> <span class="kn">import</span> <span class="n">s</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">Len</span>
<span class="kn">from</span> <span class="nn">valid8</span> <span class="kn">import</span> <span class="n">validate_field</span><span class="p">,</span> <span class="n">instance_of</span><span class="p">,</span> <span class="n">is_multiple_of</span>

<span class="k">class</span> <span class="nc">InvalidNameError</span><span class="p">(</span><span class="n">ClassFieldValidationError</span><span class="p">):</span>
    <span class="n">help_msg</span> <span class="o">=</span> <span class="s1">&#39;name should be a non-empty string&#39;</span>

<span class="k">class</span> <span class="nc">InvalidSurfaceError</span><span class="p">(</span><span class="n">ClassFieldValidationError</span><span class="p">):</span>
    <span class="n">help_msg</span> <span class="o">=</span> <span class="s1">&#39;Surface should be a multiple of 100 between 0 and 10000.&#39;</span>

<span class="nd">@validate_field</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">instance_of</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span> <span class="n">Len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">error_type</span><span class="o">=</span><span class="n">InvalidNameError</span><span class="p">)</span>
<span class="nd">@validate_field</span><span class="p">(</span><span class="s1">&#39;surface&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">10000</span><span class="p">),</span> <span class="n">is_multiple_of</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
                <span class="n">error_type</span><span class="o">=</span><span class="n">InvalidSurfaceError</span><span class="p">)</span>
<span class="nd">@attr</span><span class="o">.</span><span class="n">s</span>
<span class="k">class</span> <span class="nc">House</span><span class="p">:</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">attr</span><span class="o">.</span><span class="n">ib</span><span class="p">()</span>
    <span class="n">surface</span> <span class="o">=</span> <span class="n">attr</span><span class="o">.</span><span class="n">ib</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div>


<p>Which we can test:</p>
<div class="codehilite"><pre><span></span><code>&gt; <span class="nv">h</span> <span class="o">=</span> House<span class="o">(</span><span class="s1">&#39;sweet home&#39;</span><span class="o">)</span>     <span class="c1"># Valid (surface is nonable by generated signature)</span>
&gt; h.name <span class="o">=</span> <span class="s1">&#39;&#39;</span>                 <span class="c1"># DOES NOT RAISE InvalidNameError (no setter!)</span>
&gt; House<span class="o">(</span><span class="s1">&#39;&#39;</span>, <span class="m">10000</span><span class="o">)</span>            <span class="c1"># InvalidNameError</span>
&gt; House<span class="o">(</span><span class="s1">&#39;sweet home&#39;</span>, <span class="m">10000</span><span class="o">)</span>  <span class="c1"># InvalidSurfaceError</span>
</code></pre></div>


<p>As of today <code>attrs</code> does not transform fields into descriptors or properties so there is no way to add validation to field setters. Note that this is actually also the case if you rely on the validation mechanisms built in attrs, as explained <a href="http://www.attrs.org/en/stable/examples.html#callables">here</a>. This feature has been requested <a href="https://github.com/python-attrs/attrs/issues/160">here</a>.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../validation_funcs/d_composition/" title="Composition framework" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Composition framework
              </div>
            </div>
          </a>
        
        
          <a href="../examples/overview/" title="Overview" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Overview
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z" /></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.c51dfa35.min.js"></script>
      <script src="../assets/javascripts/bundle.eaaa3931.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.config.pipeline": "trimmer, stopWordFilter", "search.result.one": "1 matching document", "search.config.lang": "en", "clipboard.copied": "Copied to clipboard", "search.result.other": "# matching documents", "search.config.separator": "[\\s\\-]+"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.58d22e8e.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>