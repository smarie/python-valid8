



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
    
      
        <title>Reference guide - valid8</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.0284f74d.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#reference-guide" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="valid8" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              valid8
            </span>
            <span class="md-header-nav__topic">
              
                Reference guide
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/smarie/python-valid8/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="valid8" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    valid8
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/smarie/python-valid8/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home and usage" class="md-nav__link">
      Home and usage
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../why_validation/" title="Why validation" class="md-nav__link">
      Why validation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Validation functions
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Validation functions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../validation_funcs/a_basics/" title="Basics" class="md-nav__link">
      Basics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../validation_funcs/b_base_validation_lib/" title="Built-in validation functions" class="md-nav__link">
      Built-in validation functions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../validation_funcs/c_simple_syntax/" title="Simple syntax" class="md-nav__link">
      Simple syntax
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../validation_funcs/d_composition/" title="Composition framework" class="md-nav__link">
      Composition framework
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../valid8_with_other/" title="valid8 + other tools" class="md-nav__link">
      valid8 + other tools
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Examples/Recipes
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Examples/Recipes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../examples/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../examples/example1/" title="Example 1" class="md-nav__link">
      Example 1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../examples/example2/" title="Example 2" class="md-nav__link">
      Example 2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../examples/example3/" title="Example 3" class="md-nav__link">
      Example 3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../examples/example4/" title="Example 4" class="md-nav__link">
      Example 4
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../examples/example5/" title="Example 5" class="md-nav__link">
      Example 5
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../other_libs/" title="Other validation libs" class="md-nav__link">
      Other validation libs
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../api_reference/" title="API reference" class="md-nav__link">
      API reference
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../changelog/" title="Changelog" class="md-nav__link">
      Changelog
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-base-validation-functions" title="1 - Base validation functions" class="md-nav__link">
    1 - Base validation functions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-validate-according-to-your-goal-assert_valid-or-is_valid" title="2 - Validate according to your goal: assert_valid() or is_valid()" class="md-nav__link">
    2 - Validate according to your goal: assert_valid() or is_valid()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-defensive-programming-with-assert_valid" title="(a) Defensive programming with assert_valid()" class="md-nav__link">
    (a) Defensive programming with assert_valid()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#improving-the-base-validation-functions-for-better-error-messages" title="Improving the base validation functions for better error messages" class="md-nav__link">
    Improving the base validation functions for better error messages
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-cases-handling-with-is_valid" title="(b) Cases handling with is_valid()" class="md-nav__link">
    (b) Cases handling with is_valid()
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reusing-and-giving-custom-friendly-names-with-validator-objects" title="Reusing and giving custom friendly names with Validator objects" class="md-nav__link">
    Reusing and giving custom friendly names with Validator objects
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-applying-validation-to-function-arguments" title="2 - Applying validation to function arguments" class="md-nav__link">
    2 - Applying validation to function arguments
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-validate_io-decorator-" title="The @validate_io decorator -" class="md-nav__link">
    The @validate_io decorator -
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#input-validation-failure-inputvalidationerror" title="Input validation failure: InputValidationError" class="md-nav__link">
    Input validation failure: InputValidationError
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-validation-functions" title="Custom validation functions" class="md-nav__link">
    Custom validation functions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variable-length-arguments" title="Variable-length arguments" class="md-nav__link">
    Variable-length arguments
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative-to-validate_io-manual-function-wrapper" title="Alternative to @validate_io: manual function wrapper" class="md-nav__link">
    Alternative to @validate_io: manual function wrapper
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-applying-validation-anywhere-not-function-inputs" title="2 - Applying validation anywhere (not function inputs)" class="md-nav__link">
    2 - Applying validation anywhere (not function inputs)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-combining-validators-logical-operations" title="2 - Combining validators: logical operations" class="md-nav__link">
    2 - Combining validators: logical operations
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#and_" title="and_()" class="md-nav__link">
    and_()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#not_-or-catch_all-boolfalse" title="not_( or , catch_all: bool=False)" class="md-nav__link">
    not_( or , catch_all: bool=False)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#not_all-or-catch_all-boolfalse" title="not_all( or , catch_all: bool=False)" class="md-nav__link">
    not_all( or , catch_all: bool=False)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#or_validators_list" title="or_(validators_list)" class="md-nav__link">
    or_(validators_list)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#xor_validators_list" title="xor_(validators_list)" class="md-nav__link">
    xor_(validators_list)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-implementing-custom-validators" title="3 - Implementing custom validators" class="md-nav__link">
    3 - Implementing custom validators
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lambda-functions" title="Lambda functions" class="md-nav__link">
    Lambda functions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/smarie/python-valid8/edit/master/docs/old/reference.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="reference-guide">Reference guide<a class="headerlink" href="#reference-guide" title="Permanent link">&para;</a></h1>
<h2 id="1-base-validation-functions">1 - Base validation functions<a class="headerlink" href="#1-base-validation-functions" title="Permanent link">&para;</a></h2>
<p>A <strong>validation function</strong> is a <em>function</em> or <em>callable object</em> that</p>
<ul>
<li>takes a single argument as input</li>
<li>returns <code>True</code> or <code>None</code> in case of success, and does something else in case of failure. In other words, in case of failure a validator may either <strong>raise an exception</strong> of any type, or <strong>return something different</strong> than <code>True</code> or <code>None</code>.</li>
</ul>
<p>Many built-in functions or functions from existing modules may directly be used as validation functions: <code>math.isfinite</code>, <code>math.isnan</code>... Some other functions have more than one positional argument and/or keyword arguments, that you may want to hardcode using <code>functools.partial</code>. In addition, this library comes with several built-in validation functions, detailed <a href="./validation_fun.md">here</a>, and other external libraries provide similar functions that may be used too, for example <a href="./index.html#domain-specific-validators-validators-for-specific-data-types-validators-without-framework">these</a>. For example:</p>
<div class="codehilite"><pre><span></span><span class="c1"># Existing - already ok, you dont&#39; even actually need to write this :)</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">isfinite</span>
<span class="n">is_finite</span> <span class="o">=</span> <span class="n">isfinite</span>
<span class="kn">from</span> <span class="nn">valid8</span> <span class="kn">import</span> <span class="n">between</span>
<span class="n">is_between</span> <span class="o">=</span> <span class="n">between</span>

<span class="c1"># Existing + Functools Partial</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="n">is_superclass_of_bool</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="nb">issubclass</span><span class="p">,</span> <span class="nb">bool</span><span class="p">)</span>
<span class="n">is_superclass_of_bool</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="s2">&quot;Checks that c is a superclass of the bool type&quot;</span>
</pre></div>


<p>Finally, you may easily implement your own function: simply provide a function that returns <code>True</code> or nothing (or explicit <code>None</code>) in case of correct validation, and <code>False</code> or an exception raised in case validation fails. This can be done with standard functions, lambda functions, or for example <code>mini_lambda</code> functions (<code>mini_lambda</code> actually originates from this project). For example:</p>
<div class="codehilite"><pre><span></span><span class="c1"># User-defined, standard</span>
<span class="k">def</span> <span class="nf">is_multiple_of_3</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Checks that x is a multiple of 3 &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span>

<span class="c1"># User-defined, Lambda</span>
<span class="n">is_lowercase</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">islower</span><span class="p">()</span>
<span class="sd">&quot;&quot;&quot; Checks that s is lowercase &quot;&quot;&quot;</span>

<span class="c1"># User-defined, mini-lambda</span>
<span class="kn">from</span> <span class="nn">mini_lambda</span> <span class="kn">import</span> <span class="n">_</span><span class="p">,</span> <span class="n">s</span>
<span class="n">starts_with_a</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">))</span>
</pre></div>


<p>You can also create a factory of validation functions if you want to be able to define validation functions according to parameters:</p>
<div class="codehilite"><pre><span></span><span class="c1"># The factory of validation functions</span>
<span class="k">def</span> <span class="nf">is_multiple_of</span><span class="p">(</span><span class="n">ref</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a validation function to validate that x is a multiple of &lt;ref&gt;.</span>
<span class="sd">    The name and docstring of the returned function are filled appropriately</span>

<span class="sd">    :param ref: the reference to compare x to</span>
<span class="sd">    :return: a new function to check if a number x is a multiple of &lt;ref&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">is_multiple_of_ref</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">x</span> <span class="o">%</span> <span class="n">ref</span> <span class="o">==</span> <span class="mi">0</span>

    <span class="n">is_multiple_of_ref</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="s2">&quot;Checks that x is a multiple of {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ref</span><span class="p">)</span>
    <span class="n">is_multiple_of_ref</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">=</span> <span class="s2">&quot;is_multiple_of_&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ref</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">is_multiple_of_ref</span>

<span class="n">is_multiple_of_5</span> <span class="o">=</span> <span class="n">is_multiple_of</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">is_multiple_of_9</span> <span class="o">=</span> <span class="n">is_multiple_of</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
</pre></div>


<h2 id="2-validate-according-to-your-goal-assert_valid-or-is_valid">2 - Validate according to your goal: <code>assert_valid()</code> or <code>is_valid()</code><a class="headerlink" href="#2-validate-according-to-your-goal-assert_valid-or-is_valid" title="Permanent link">&para;</a></h2>
<p>As we could see above, our definition of validation functions is very broad. This is a key point in <code>valid8</code>: if we want to be able to reuse as many existing validation function as possible from the outside world, no additional constraint should be present. So they will be sometimes raising exceptions, sometimes not. However when you will be using these building blocks in your code, and possibly combining them, you should be able to decide whether you want to do:</p>
<ul>
<li><strong>Defensive programming</strong>: if validation fails, you wish to raise an error message, if possible user-friendly. This is basically the same intent than the <code>assert &lt;expression&gt;</code> syntax, without its drawbacks and with consistency in the exception whatever the underlying validation functions.</li>
<li><strong>Cases handling</strong>: if validation fails, you wish to perform something else (handling the value differently, not using the value...)</li>
</ul>
<p>For this reason, <code>valid8</code> provides you with two wrapper functions for inline validation, to </p>
<ul>
<li><code>assert_valid(&lt;value&gt;, &lt;functions&gt;)</code> is for defensive programming. It raises consistent <code>ValidationError</code> in case of failure, whatever the validation function styles.</li>
<li><code>is_valid(&lt;value&gt;, &lt;functions&gt;)</code> is for cases handling. It returns a boolean indicating success or failure, whatever the validation function styles.</li>
</ul>
<h3 id="a-defensive-programming-with-assert_valid">(a) Defensive programming with <code>assert_valid()</code><a class="headerlink" href="#a-defensive-programming-with-assert_valid" title="Permanent link">&para;</a></h3>
<p>Let's use all of our validation functions defined above in a defensive programming way, to check the error raised. </p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">valid8</span> <span class="kn">import</span> <span class="n">ensure_valid</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">isfinite</span><span class="p">,</span> <span class="n">inf</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="kn">from</span> <span class="nn">mini_lambda</span> <span class="kn">import</span> <span class="n">s</span>

<span class="c1"># (1) Existing function</span>
<span class="n">ensure_valid</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">isfinite</span><span class="p">)</span> <span class="c1"># OK</span>
<span class="n">ensure_valid</span><span class="p">(</span><span class="n">inf</span><span class="p">,</span> <span class="n">isfinite</span><span class="p">)</span> <span class="c1"># ValidationError</span>
<span class="c1"># &gt; Error validating [inf]: validator [isfinite] returned [False]</span>

<span class="c1"># (2) Functools partial</span>
<span class="n">ensure_valid</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">partial</span><span class="p">(</span><span class="nb">issubclass</span><span class="p">,</span> <span class="nb">bool</span><span class="p">))</span>  <span class="c1"># ok</span>
<span class="n">ensure_valid</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">partial</span><span class="p">(</span><span class="nb">issubclass</span><span class="p">,</span> <span class="nb">bool</span><span class="p">))</span>  <span class="c1"># ValidationError</span>
<span class="c1"># &gt; Error validating [&lt;class &#39;str&#39;&gt;]: validator \</span>
<span class="c1"># [functools.partial(&lt;built-in function issubclass&gt;, &lt;class &#39;bool&#39;&gt;)] \</span>
<span class="c1"># returned [False]</span>

<span class="c1"># (3) User-defined, standard</span>
<span class="n">ensure_valid</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="n">is_multiple_of_3</span><span class="p">)</span>  <span class="c1"># ok</span>
<span class="n">ensure_valid</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">is_multiple_of_3</span><span class="p">)</span>  <span class="c1"># ValidationError</span>
<span class="c1"># &gt; Error validating [4]: validator [is_multiple_of_3] returned [False]</span>

<span class="c1"># (4) User-defined, lambda</span>
<span class="n">ensure_valid</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">islower</span><span class="p">())</span>  <span class="c1"># ok</span>
<span class="n">ensure_valid</span><span class="p">(</span><span class="s1">&#39;aBc&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">islower</span><span class="p">())</span>  <span class="c1"># ValidationError      </span>
<span class="c1"># &gt; Error validating [aBc]: validator [&lt;lambda&gt;] returned [False]</span>

<span class="c1"># (5) User-defined, mini-lambda</span>
<span class="n">ensure_valid</span><span class="p">(</span><span class="s1">&#39;Abc&#39;</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">))</span>  <span class="c1"># ok</span>
<span class="n">ensure_valid</span><span class="p">(</span><span class="s1">&#39;bac&#39;</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">))</span>  <span class="c1"># ValidationError</span>
<span class="c1"># &gt; Error validating [bac]: validator [s.lower().startswith(&#39;a&#39;)] returned [False]</span>

<span class="c1"># (6) User-defined, factory</span>
<span class="n">ensure_valid</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="n">is_multiple_of</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>  <span class="c1"># ok</span>
<span class="n">ensure_valid</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">is_multiple_of</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>   <span class="c1"># ValidationError</span>
<span class="c1"># &gt; Error validating [1]: validator [is_multiple_of_5] returned [False]</span>
</pre></div>


<p>We can note in the examples above that the returned error message is more or less understandable, depending on how the validation function was defined. Actually the way <code>valid8</code> extracts a name for the validation function to present it in error messages is extremely simple:</p>
<ul>
<li>if the validation function has a <code>__name__</code> attribute, use it. For example <code>isfinite</code>, <code>is_multiple_of_3</code>, and even the factory-created <code>is_multiple_of_5</code> end-up with a nice name.</li>
<li>otherwise use <code>str(validation_function)</code>. This is why we get the cryptic <code>&lt;lambda&gt;</code> and <code>functools.partial(&lt;built-in function issubclass&gt;, &lt;class 'bool'&gt;)</code>. We can note that the mini-lambda <code>s.lower().startswith('a')</code> at least is readable, even if it does not have a name.</li>
</ul>
<p>Finally we note that in the error messages, validation functions are named "validator" as it is more readable for the end-user.  </p>
<h4 id="improving-the-base-validation-functions-for-better-error-messages">Improving the base validation functions for better error messages<a class="headerlink" href="#improving-the-base-validation-functions-for-better-error-messages" title="Permanent link">&para;</a></h4>
<p>Although we saw that extremely simple validation functions with intuitive names such as <code>is_multiple_of_3</code> lead to perfectly understandable error messages in case of validation failure, the function name might sometimes be a bit cryptic for the end user or might lack a bit of details about what exactly failed. </p>
<p>If you want a validator to be able to return details about a failure you may:</p>
<ul>
<li>(recommended) raise an exception. The <code>BasicFailure</code> type is provided in this package for convenience, but you may wish to use another exception type. You can even use <code>assert</code> here but this is not recommended </li>
<li>return the details as an object, without raising an exception</li>
</ul>
<p>For example: </p>
<p><strong>TODO update from tests code</strong></p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">valid8</span> <span class="kn">import</span> <span class="n">ValidationFailure</span>

<span class="c1"># (recommended) raising an exception</span>
<span class="k">def</span> <span class="nf">gt_0</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;x is not greater than 0, x={}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">gt_1</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ValidationFailure</span><span class="o">.</span><span class="n">create_with_statement</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;gt_1&#39;</span><span class="p">,</span> 
                                                      <span class="n">statement</span><span class="o">=</span><span class="s1">&#39;x &gt;= 1&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>

<span class="c1"># (not recommended) relying on assert, only valid in &#39;debug&#39; mode</span>
<span class="k">def</span> <span class="nf">gt_2</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">assert</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="mi">2</span>

<span class="c1"># (not recommended) returning details without raising anything</span>
<span class="k">def</span> <span class="nf">gt_3</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;x is not greater than 3, x={}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>


<p>Let's check the resulting error messages:</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">valid8</span> <span class="kn">import</span> <span class="n">ensure_valid</span>

<span class="n">assert_valid</span><span class="p">(</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">gt_0</span><span class="p">)</span>  <span class="c1"># ValidationError</span>
<span class="c1"># &gt; Error validating [-0.2]. \</span>
<span class="c1"># Caught [ValueError]: x is not greater than 0, x=-0.2</span>

<span class="n">assert_valid</span><span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">gt_1</span><span class="p">)</span>   <span class="c1"># ValidationError</span>
<span class="c1"># &gt; Error validating [0.2]. \</span>
<span class="c1"># Caught [ValidationFailure]: gt_1: x &gt;= 1 does not hold for variable x=0.2 .</span>

<span class="n">assert_valid</span><span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">gt_2</span><span class="p">)</span>   <span class="c1"># ValidationError</span>
<span class="c1"># &gt; Error validating [0.2]. Caught [AssertionError]: assert 0.2 &gt;= 2</span>

<span class="n">assert_valid</span><span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">gt_3</span><span class="p">)</span>   <span class="c1"># ValidationError</span>
<span class="c1"># &gt; Error validating [0.2]: \</span>
<span class="c1"># validator [gt_3] returned [x is not greater than 3, x=0.2].</span>
</pre></div>


<p>We can see that they are more pretty: they contain our validation message details. </p>
<h3 id="b-cases-handling-with-is_valid">(b) Cases handling with <code>is_valid()</code><a class="headerlink" href="#b-cases-handling-with-is_valid" title="Permanent link">&para;</a></h3>
<p>Let us do the same with <code>is_valid</code>, adding even our new functions created in previous section:</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">valid8</span> <span class="kn">import</span> <span class="n">is_valid</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">isfinite</span><span class="p">,</span> <span class="n">inf</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="kn">from</span> <span class="nn">mini_lambda</span> <span class="kn">import</span> <span class="n">s</span>

<span class="c1"># (1) Existing function</span>
<span class="n">is_valid</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">isfinite</span><span class="p">)</span> <span class="c1"># True</span>
<span class="n">is_valid</span><span class="p">(</span><span class="n">inf</span><span class="p">,</span> <span class="n">isfinite</span><span class="p">)</span> <span class="c1"># False</span>

<span class="c1"># (2) Functools partial</span>
<span class="n">is_valid</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">partial</span><span class="p">(</span><span class="nb">issubclass</span><span class="p">,</span> <span class="nb">bool</span><span class="p">))</span>  <span class="c1"># True</span>
<span class="n">is_valid</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">partial</span><span class="p">(</span><span class="nb">issubclass</span><span class="p">,</span> <span class="nb">bool</span><span class="p">))</span>  <span class="c1"># False</span>

<span class="c1"># (3) User-defined, standard</span>
<span class="n">is_valid</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="n">is_multiple_of_3</span><span class="p">)</span>  <span class="c1"># True</span>
<span class="n">is_valid</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">is_multiple_of_3</span><span class="p">)</span>  <span class="c1"># False</span>

<span class="c1"># (4) User-defined, lambda</span>
<span class="n">is_valid</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">islower</span><span class="p">())</span>  <span class="c1"># True</span>
<span class="n">is_valid</span><span class="p">(</span><span class="s1">&#39;aBc&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">s</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">islower</span><span class="p">())</span>  <span class="c1"># False</span>

<span class="c1"># (5) User-defined, mini-lambda</span>
<span class="n">is_valid</span><span class="p">(</span><span class="s1">&#39;Abc&#39;</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">))</span>  <span class="c1"># True</span>
<span class="n">is_valid</span><span class="p">(</span><span class="s1">&#39;bac&#39;</span><span class="p">,</span> <span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">))</span>  <span class="c1"># False</span>

<span class="c1"># (6) User-defined, factory</span>
<span class="n">is_valid</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="n">is_multiple_of</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>  <span class="c1"># True</span>
<span class="n">is_valid</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">is_multiple_of</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span>   <span class="c1"># False</span>
</pre></div>


<p>We can note that no exception is raised any more, and the </p>
<h4 id="reusing-and-giving-custom-friendly-names-with-validator-objects">Reusing and giving custom friendly names with <code>Validator</code> objects<a class="headerlink" href="#reusing-and-giving-custom-friendly-names-with-validator-objects" title="Permanent link">&para;</a></h4>
<p><code>Validator</code> is the base object used behind <code>assert_valid()</code> and <code>is_valid()</code>. Actually, <code>assert_valid()</code> is an alias for <code>Validator(validator_func)(value)</code>, while <code>is_valid()</code> is an alias for <code>Validator(validator_func, return_bool=True)(value)</code>.</p>
<p>You may wish to decompose the two steps in order to reuse the same validation procedures with a more custom friendly name across your code, for example: </p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">valid8</span> <span class="kn">import</span> <span class="n">Validator</span>
<span class="kn">from</span> <span class="nn">mini_lambda</span> <span class="kn">import</span> <span class="n">s</span>

<span class="c1"># create a &#39;defensive programming&#39; validation procedure with a friendly name</span>
<span class="n">validate_starts_with_a</span> <span class="o">=</span> <span class="n">Validator</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">))</span>

<span class="c1"># create a &#39;case handling&#39; validation procedure with a friendly name</span>
<span class="n">starts_with_a</span> <span class="o">=</span> <span class="n">Validator</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">),</span> <span class="n">return_bool</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c1"># here you use them</span>
<span class="n">validate_starts_with_a</span><span class="p">(</span><span class="n">my_string</span><span class="p">)</span>
<span class="k">if</span> <span class="n">starts_with_a</span><span class="p">(</span><span class="n">my_string_2</span><span class="p">):</span>
    <span class="o">...</span>
<span class="k">else</span><span class="p">:</span>
    <span class="o">...</span>
</pre></div>


<h2 id="2-applying-validation-to-function-arguments">2 - Applying validation to function arguments<a class="headerlink" href="#2-applying-validation-to-function-arguments" title="Permanent link">&para;</a></h2>
<h3 id="the-validate_io-decorator-">The <code>@validate_io</code> decorator -<a class="headerlink" href="#the-validate_io-decorator-" title="Permanent link">&para;</a></h3>
<p>The <code>@validate_io</code> decorator adds input/argument validation to a function. Simply declare the name of each input to validate, and associate it with a validator or a list of validators:</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">valid8</span> <span class="kn">import</span> <span class="n">validate</span>

<span class="nd">@validate</span><span class="p">(</span><span class="o">&lt;</span><span class="n">input_name</span><span class="o">&gt;=&lt;</span><span class="n">validator_or_list_of_validators</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">myfunc</span><span class="p">(</span><span class="o">&lt;</span><span class="n">input_name</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">...</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>


<p>For example below we validate that the second and third inputs of <code>myfunc</code> are finite:</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">valid8</span> <span class="kn">import</span> <span class="n">validate</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">isfinite</span>

<span class="nd">@validate</span><span class="p">(</span><span class="n">arg2</span><span class="o">=</span><span class="n">isfinite</span><span class="p">,</span> <span class="n">arg3</span><span class="o">=</span><span class="n">isfinite</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">myfunc</span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="p">,</span> <span class="n">arg3</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>


<p>Note: as of today it is not possible to validate a combination of arguments, for example to validate that <code>arg2 + arg3 &gt; 0</code>. See <a href="https://github.com/smarie/python-valid8/issues/2">#2</a>.</p>
<h3 id="input-validation-failure-inputvalidationerror">Input validation failure: <code>InputValidationError</code><a class="headerlink" href="#input-validation-failure-inputvalidationerror" title="Permanent link">&para;</a></h3>
<p>Let us test the above function by providing invalid arguments:</p>
<div class="codehilite"><pre><span></span><span class="n">myfunc</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">inf</span><span class="p">,</span> <span class="n">inf</span><span class="p">)</span>
</pre></div>


<p>It raises the following validation exception:</p>
<div class="codehilite"><pre><span></span>valid8.core.InputValidationError: Error validating input [arg2=inf] for
   / function [myfunc]: validator [isfinite] returned [False] that is
   / not in {None, True}
</pre></div>


<p>There are a couple important things to note here:</p>
<ul>
<li>a failed validation results in an <code>InputValidationError</code> being raised</li>
<li>Validation for each function input are performed in sequence and this breaks at the first validation error. Therefore here validation for <code>arg3</code> was not even performed.</li>
<li><code>InputValidationError</code> (for function inputs validation only) extends <code>ValidationError</code> (general-purpose exception class provided in valid8).</li>
</ul>
<h3 id="custom-validation-functions">Custom validation functions<a class="headerlink" href="#custom-validation-functions" title="Permanent link">&para;</a></h3>
<ul>
<li>Whatever the failure mode of the validation function (exception or bad returned value), a failed validation will <em>always</em> result in an <code>InputValidationError</code> being raised. However we will see in the next section that validators have the possibility to provide more details about the failure - in such case these details are displayed too and are available as a field of the <code>InputValidationError</code>.</li>
</ul>
<h3 id="variable-length-arguments">Variable-length arguments<a class="headerlink" href="#variable-length-arguments" title="Permanent link">&para;</a></h3>
<p>TODO</p>
<p>Many validators are provided out of the box to use with <code>@validate_io</code>: <code>gt</code>, <code>between</code>, <code>is_in</code>, <code>maxlen</code>... check them out in <a href="https://smarie.github.io/python-valid8/validators/">the validators list page</a>. For example below we check that input <code>a</code> is not <code>None</code>, is even, and is greater than 1, and that input <code>b</code> is even:</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">valid8</span> <span class="kn">import</span> <span class="n">validate</span><span class="p">,</span> <span class="n">not_none</span><span class="p">,</span> <span class="n">is_even</span><span class="p">,</span> <span class="n">gt</span>

<span class="nd">@validate</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="n">not_none</span><span class="p">,</span> <span class="n">is_even</span><span class="p">,</span> <span class="n">gt</span><span class="p">(</span><span class="mi">1</span><span class="p">)],</span> <span class="n">b</span><span class="o">=</span><span class="n">is_even</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">myfunc</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="n">myfunc</span><span class="p">(</span><span class="mi">84</span><span class="p">,</span> <span class="mi">82</span><span class="p">)</span>  <span class="c1"># OK</span>
<span class="n">myfunc</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>  <span class="n">ValidationFailure</span>
<span class="n">myfunc</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>     <span class="n">ValidationFailure</span>
<span class="n">myfunc</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>     <span class="n">ValidationFailure</span>
<span class="n">myfunc</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>     <span class="n">ValidationFailure</span>
</pre></div>


<h3 id="alternative-to-validate_io-manual-function-wrapper">Alternative to <code>@validate_io</code>: manual function wrapper<a class="headerlink" href="#alternative-to-validate_io-manual-function-wrapper" title="Permanent link">&para;</a></h3>
<p>If you wish to add validation to a function <em>a posteriori</em>, you may use <code>decorate_with_validation(func, **validators)</code>:</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">valid8</span> <span class="kn">import</span> <span class="n">validate_decorate</span><span class="p">,</span> <span class="n">is_even</span>

<span class="c1"># existing function without validation</span>
<span class="k">def</span> <span class="nf">my_func</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="c1"># manually add validation afterwards</span>
<span class="n">my_func</span> <span class="o">=</span> <span class="n">validate_decorate</span><span class="p">(</span><span class="n">my_func</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="n">is_even</span><span class="p">)</span>
<span class="n">my_func</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>  <span class="n">ValidationFailure</span>
</pre></div>


<h2 id="2-applying-validation-anywhere-not-function-inputs">2 - Applying validation anywhere (not function inputs)<a class="headerlink" href="#2-applying-validation-anywhere-not-function-inputs" title="Permanent link">&para;</a></h2>
<p><strong>TODO</strong> explain how the validators may be used directly inline, with and without <code>assert</code>.</p>
<h2 id="2-combining-validators-logical-operations">2 - Combining validators: logical operations<a class="headerlink" href="#2-combining-validators-logical-operations" title="Permanent link">&para;</a></h2>
<p>Validating a value will rarely check only one aspect. Therefore you might often wish to combine existing validators, or to combine existing validators with your own custom validators, to provide complete validation. <code>valid8</code> provides the following operators for validators composition.</p>
<h4 id="and_">and_(<validators_list>)<a class="headerlink" href="#and_" title="Permanent link">&para;</a></h4>
<p>An 'and' validator: it returns <code>True</code> if all of the provided validators return <code>True</code>, or raises a <code>ValidationError</code> on the first <code>False</code> received or <code>Exception</code> caught.</p>
<p>Note that an implicit <code>and_</code> is performed if you provide a list of validators to <code>@validate_io</code>.</p>
<div class="codehilite"><pre><span></span><span class="nd">@validate_io</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="n">and_</span><span class="p">([</span><span class="n">is_even</span><span class="p">,</span> <span class="n">gt</span><span class="p">(</span><span class="mi">1</span><span class="p">)])])</span>
<span class="k">def</span> <span class="nf">myfunc</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="n">myfunc</span><span class="p">(</span><span class="mi">84</span><span class="p">)</span>  <span class="c1"># ok</span>
<span class="n">myfunc</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>   <span class="n">ValidationFailure</span>
<span class="n">myfunc</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>   <span class="n">ValidationFailure</span>
</pre></div>


<h4 id="not_-or-catch_all-boolfalse">not_(<validator> or <validators_list>, catch_all: bool=False)<a class="headerlink" href="#not_-or-catch_all-boolfalse" title="Permanent link">&para;</a></h4>
<p>Generates the inverse of the provided validator: when the validator returns <code>False</code> or raises a <code>ValidationError</code>, this validator returns <code>True</code>. Otherwise it returns <code>False</code>.</p>
<p>By default, <code>Expection</code> other than <code>ValidationError</code> are not caught and therefore fail the validation (<code>catch_all=False</code>). To change this behaviour you can turn the <code>catch_all</code> parameter to <code>True</code>, in which case all exceptions will be caught instead of just <code>ValidationError</code>s.</p>
<div class="codehilite"><pre><span></span><span class="nd">@validate_io</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">not_</span><span class="p">(</span><span class="n">is_even</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">myfunc</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="n">myfunc</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="c1"># ok</span>
<span class="n">myfunc</span><span class="p">(</span><span class="mi">84</span><span class="p">)</span>  <span class="c1"># ValidationError! a is even</span>
</pre></div>


<h4 id="not_all-or-catch_all-boolfalse">not_all(<validator> or <validators_list>, catch_all: bool=False)<a class="headerlink" href="#not_all-or-catch_all-boolfalse" title="Permanent link">&para;</a></h4>
<p>An alias for <code>not_(and_(validators))</code>.</p>
<div class="codehilite"><pre><span></span><span class="nd">@validate_io</span><span class="p">(</span><span class="n">b</span><span class="o">=</span><span class="n">not_all</span><span class="p">([</span><span class="n">is_even</span><span class="p">,</span> <span class="n">is_multiple_of</span><span class="p">(</span><span class="mi">3</span><span class="p">)]))</span>
<span class="k">def</span> <span class="nf">myfunc</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="n">myfunc</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span>  <span class="c1"># ok</span>
<span class="n">myfunc</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>   <span class="c1"># ValidationError: b is odd (ok) but it is a multiple of 3 (nok)</span>
</pre></div>


<h4 id="or_validators_list">or_(validators_list)<a class="headerlink" href="#or_validators_list" title="Permanent link">&para;</a></h4>
<p>An 'or' validator: returns <code>True</code> if at least one of the provided validators returns <code>True</code>. All exceptions will be silently caught. In case of failure, a global <code>ValidationError</code> will be raised, together with the first caught exception's message if any.</p>
<h4 id="xor_validators_list">xor_(validators_list)<a class="headerlink" href="#xor_validators_list" title="Permanent link">&para;</a></h4>
<p>A 'xor' validator: returns <code>True</code> if exactly one of the provided validators returns <code>True</code>. All exceptions will be silently caught. In case of failure, a global <code>ValidationError</code> will be raised, together with the first caught exception's message if any.</p>
<h2 id="3-implementing-custom-validators">3 - Implementing custom validators<a class="headerlink" href="#3-implementing-custom-validators" title="Permanent link">&para;</a></h2>
<h3 id="lambda-functions">Lambda functions<a class="headerlink" href="#lambda-functions" title="Permanent link">&para;</a></h3>
<p><strong>TODO</strong></p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>