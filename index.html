
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="shortcut icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.2.6">
    
    
      
        <title>valid8</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.cb6bc1d0.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.39b8e14a.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#python-validate-valid8" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="." title="valid8" class="md-header-nav__button md-logo" aria-label="valid8">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis">
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            valid8
          </span>
        </div>
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            
              Home and usage
            
          </span>
        </div>
      </div>
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/smarie/python-valid8/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="valid8" class="md-nav__button md-logo" aria-label="valid8">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    valid8
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/smarie/python-valid8/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Home and usage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        Home and usage
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#do-i-need-validation" class="md-nav__link">
    Do I need validation ?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing" class="md-nav__link">
    Installing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0-concepts" class="md-nav__link">
    0. Concepts
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-entry-points" class="md-nav__link">
    1. Entry points
  </a>
  
    <nav class="md-nav" aria-label="1. Entry points">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-inline" class="md-nav__link">
    a - inline
  </a>
  
    <nav class="md-nav" aria-label="a - inline">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#validate" class="md-nav__link">
    validate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validatorvalidation" class="md-nav__link">
    validator/validation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-functions" class="md-nav__link">
    b - functions
  </a>
  
    <nav class="md-nav" aria-label="b - functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nonable-inputsoutputs" class="md-nav__link">
    nonable inputs/outputs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-class-fields" class="md-nav__link">
    c - class fields
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-validation-functions" class="md-nav__link">
    2. Validation functions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-custom-exceptions" class="md-nav__link">
    3. Custom exceptions
  </a>
  
    <nav class="md-nav" aria-label="3. Custom exceptions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-custom-message" class="md-nav__link">
    a - custom message
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-custom-type" class="md-nav__link">
    b - custom type
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-message-templating" class="md-nav__link">
    c - message templating
  </a>
  
    <nav class="md-nav" aria-label="c - message templating">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#d-typeerror-or-valueerror" class="md-nav__link">
    d - TypeError or ValueError
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#main-features" class="md-nav__link">
    Main features
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-validation-libraries" class="md-nav__link">
    Other Validation libraries
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#origin-of-this-project" class="md-nav__link">
    Origin of this project
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#see-also" class="md-nav__link">
    See Also
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#want-to-contribute" class="md-nav__link">
    Want to contribute ?
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="why_validation/" class="md-nav__link">
        Why validation
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" >
      
      <label class="md-nav__link" for="nav-3">
        Validation functions
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Validation functions" data-md-level="1">
        <label class="md-nav__title" for="nav-3">
          <span class="md-nav__icon md-icon"></span>
          Validation functions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="validation_funcs/a_basics/" class="md-nav__link">
        Basics
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="validation_funcs/b_base_validation_lib/" class="md-nav__link">
        Built-in validation functions
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="validation_funcs/c_simple_syntax/" class="md-nav__link">
        Simple syntax
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="validation_funcs/d_composition/" class="md-nav__link">
        Composition framework
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="valid8_with_other/" class="md-nav__link">
        valid8 + other tools
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" >
      
      <label class="md-nav__link" for="nav-5">
        Examples/Recipes
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Examples/Recipes" data-md-level="1">
        <label class="md-nav__title" for="nav-5">
          <span class="md-nav__icon md-icon"></span>
          Examples/Recipes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
          
            
  
  
  
    <li class="md-nav__item">
      <a href="examples/overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="examples/example1/" class="md-nav__link">
        Example 1
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="examples/example2/" class="md-nav__link">
        Example 2
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="examples/example3/" class="md-nav__link">
        Example 3
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="examples/example4/" class="md-nav__link">
        Example 4
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="examples/example5/" class="md-nav__link">
        Example 5
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="other_libs/" class="md-nav__link">
        Other validation libs
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="api_reference/" class="md-nav__link">
        API reference
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="changelog/" class="md-nav__link">
        Changelog
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#do-i-need-validation" class="md-nav__link">
    Do I need validation ?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing" class="md-nav__link">
    Installing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#0-concepts" class="md-nav__link">
    0. Concepts
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-entry-points" class="md-nav__link">
    1. Entry points
  </a>
  
    <nav class="md-nav" aria-label="1. Entry points">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-inline" class="md-nav__link">
    a - inline
  </a>
  
    <nav class="md-nav" aria-label="a - inline">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#validate" class="md-nav__link">
    validate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validatorvalidation" class="md-nav__link">
    validator/validation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-functions" class="md-nav__link">
    b - functions
  </a>
  
    <nav class="md-nav" aria-label="b - functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nonable-inputsoutputs" class="md-nav__link">
    nonable inputs/outputs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-class-fields" class="md-nav__link">
    c - class fields
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-validation-functions" class="md-nav__link">
    2. Validation functions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-custom-exceptions" class="md-nav__link">
    3. Custom exceptions
  </a>
  
    <nav class="md-nav" aria-label="3. Custom exceptions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-custom-message" class="md-nav__link">
    a - custom message
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#b-custom-type" class="md-nav__link">
    b - custom type
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-message-templating" class="md-nav__link">
    c - message templating
  </a>
  
    <nav class="md-nav" aria-label="c - message templating">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#d-typeerror-or-valueerror" class="md-nav__link">
    d - TypeError or ValueError
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#main-features" class="md-nav__link">
    Main features
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-validation-libraries" class="md-nav__link">
    Other Validation libraries
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#origin-of-this-project" class="md-nav__link">
    Origin of this project
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#see-also" class="md-nav__link">
    See Also
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#want-to-contribute" class="md-nav__link">
    Want to contribute ?
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/smarie/python-valid8/edit/master/docs/index.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="python-validate-valid8">python-validate (valid8)<a class="headerlink" href="#python-validate-valid8" title="Permanent link">&para;</a></h1>
<p><a href="https://pypi.python.org/pypi/valid8/"><img alt="Python versions" src="https://img.shields.io/pypi/pyversions/valid8.svg" /></a> <a href="https://travis-ci.com/smarie/python-valid8"><img alt="Build Status" src="https://travis-ci.com/smarie/python-valid8.svg?branch=master" /></a> <a href="https://smarie.github.io/python-valid8/junit/report.html"><img alt="Tests Status" src="https://smarie.github.io/python-valid8/junit/junit-badge.svg?dummy=8484744" /></a> <a href="https://codecov.io/gh/smarie/python-valid8"><img alt="codecov" src="https://codecov.io/gh/smarie/python-valid8/branch/master/graph/badge.svg" /></a></p>
<p><a href="https://smarie.github.io/python-valid8/"><img alt="Documentation" src="https://img.shields.io/badge/doc-latest-blue.svg" /></a> <a href="https://pypi.python.org/pypi/valid8/"><img alt="PyPI" src="https://img.shields.io/pypi/v/valid8.svg" /></a> <a href="https://pepy.tech/project/valid8"><img alt="Downloads" src="https://pepy.tech/badge/valid8" /></a> <a href="https://pepy.tech/project/valid8"><img alt="Downloads per week" src="https://pepy.tech/badge/valid8/week" /></a> <a href="https://github.com/smarie/python-valid8/stargazers"><img alt="GitHub stars" src="https://img.shields.io/github/stars/smarie/python-valid8.svg" /></a></p>
<p><em>"valid8ing is not a crime" ;-)</em></p>
<div class="admonition success">
<p class="admonition-title">New <a href="https://smarie.github.io/python-vtypes/"><code>vtypes</code></a> and <a href="https://smarie.github.io/python-pyfields/"><code>pyfields</code></a> libraries leverage <code>valid8</code> to provide higher-level value, check them out !</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Major API changes in version <code>5.0.0</code>. See <a href="changelog/#500-more-betterness">changelog</a> for details.</p>
</div>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p><code>valid8</code> provides user-friendly tools for 3 kind of "entry points":</p>
<ul>
<li>general-purpose <a href="#1-usage-inline"><strong>inline</strong></a> validation (=anywhere in your code), </li>
<li><a href="#a-functions"><strong>function</strong></a> inputs/outputs validation </li>
<li><a href="#b-class-fields"><strong>class fields</strong></a> validation.</li>
</ul>
<p>All these entry points raise consistent <code>ValidationError</code> including user-friendly details, with inheritance of <code>ValueError</code> / <code>TypeError</code> as appropriate. You can <a href="#3-custom-exceptions"><strong>customize this error</strong></a> so as to get unique error types convenient for i18n.</p>
<p>Now <strong>what can you validate</strong> ? Pretty much anything: you define validators by combining one or several elementary validation functions, with <a href="validation_funcs/a_basics/">minimalistic requirements</a>. For this you can reuse <a href="validation_funcs/b_base_validation_lib/">built-in functions</a>, 3d party functions, or write your own. You can even <a href="validation_funcs/a_basics/#2-creating-failure-raisers-for-better-user-experience">augment existing functions</a> with more user-friendly errors. The internal <a href="validation_funcs/d_composition/">composition framework</a> makes it easy to combine the best of all worlds for each situation.</p>
<p>So with a bird eye's view:</p>
<p><img alt="architecture_overview" src="imgs/architecture_overview.png" /></p>
<h2 id="do-i-need-validation">Do I need validation ?<a class="headerlink" href="#do-i-need-validation" title="Permanent link">&para;</a></h2>
<p><strong>type</strong> (<code>TypeError</code>) and <strong>value</strong> (<code>ValueError</code>) validation is key to smooth user experience: if something fails, there is nothing more frustrating that a horrible cryptic error message. Good validation leads to less end-user frustration. So validation <strong>has</strong> to be done in user-facing production code. However it is maybe <strong>already</strong> done by someone else:</p>
<ul>
<li>if your code is inside a <strong>framework</strong> that does the final application for you (<code>django</code>, <code>click</code>, <code>fastAPI</code> etc.), user inputs are probably already validated. So <em>validation in your code is optional (but can help)</em>.</li>
<li>if your code is a <strong>low-level library</strong> and you do not care about the final application, <em>validation is also optional (but it can help)</em>. Your library's documentation may replace the need for validation to some extend.</li>
<li>otherwise validation becomes quite <strong>recommended</strong> (you care about the <strong>final application</strong>'s user experience, and no application framework handles it already for you)</li>
</ul>
<p>In <a href="why_validation/">this page</a>, we try to explain what is validation, what you would need to do in order to implement it correctly and consistently by yourself (<code>assert</code> is not a viable solution unfortunately), and demonstrate <strong>how much effort that would cost you</strong>.</p>
<p>I searched and found tons of good and less good libraries <a href="other_libs/">out there</a>, but did not find any that would provide a somehow generic answer covering 80% of the needs - especially the particular needs I had for class attributes validation in <a href="valid8_with_other/#autoclass"><code>autoclass</code></a>, <a href="valid8_with_other/#attrs"><code>attrs</code></a> and now in <a href="https://smarie.github.io/python-pyfields/"><code>pyfields</code></a>.</p>
<p><code>valid8</code> provides tools to perform validation in a minimum number of lines and with built-in consistency, so that it hopefully becomes fun and easy to include in your code. </p>
<h2 id="installing">Installing<a class="headerlink" href="#installing" title="Permanent link">&para;</a></h2>
<div class="codehilite"><pre><span></span><code>&gt; pip install valid8
</code></pre></div>


<p>Optional but recommended:</p>
<ul>
<li>
<p>If you wish to create highly compact object classes with field type+value validation, have a look at <a href="valid8_with_other/"><code>pyfields</code>, <code>attrs</code> or <code>autoclass</code></a>.</p>
</li>
<li>
<p>If you wish to define your own validation functions for functions and classes validation in a very compact way, you may wish to also install <a href="https://smarie.github.io/python-mini-lambda/">mini_lambda</a>. See below for examples.</p>
</li>
</ul>
<h2 id="0-concepts">0. Concepts<a class="headerlink" href="#0-concepts" title="Permanent link">&para;</a></h2>
<p><code>valid8</code> relies on two main concepts:</p>
<ul>
<li>
<p><a href="#1-entry-points"><strong>entry points</strong></a> are responsible to apply validation to a specific part of your code. They all raise <code>ValidationError</code> when validation failed, and are the ones providing the context (they know that the variable is a function input or a class field, and know its name)</p>
</li>
<li>
<p><a href="#2-validation-functions"><strong>validation functions</strong></a> are in charge of the validation <em>per se</em>. They receive the value to validate and should return <code>True</code> or <code>None</code> in case of success. Each entry point has a single main underlying validation function, automatically created from all the user-provided functions using the <em>simple validation function definition syntax</em>.</p>
</li>
</ul>
<h2 id="1-entry-points">1. Entry points<a class="headerlink" href="#1-entry-points" title="Permanent link">&para;</a></h2>
<h3 id="a-inline">a - inline<a class="headerlink" href="#a-inline" title="Permanent link">&para;</a></h3>
<p><code>valid8</code> provides two validation methods that you may use anywhere in your code: </p>
<ul>
<li><code>validate(...)</code> to perform the most simple validation tasks in one line of code</li>
<li><code>with validation(...)</code> (or its alias <code>with validator(...) as v</code>) for any other validation task, in two or more lines of code</li>
</ul>
<h4 id="validate"><code>validate</code><a class="headerlink" href="#validate" title="Permanent link">&para;</a></h4>
<p>The <code>validate</code> method is the most straightforward tool in this toolbox. It provides you with ways to quickly validate one or several of:</p>
<ul>
<li>value is not <code>None</code></li>
<li>value is an <strong>instance</strong> of one type in a reference set, or is a <strong>subtype</strong> of a reference set</li>
<li>value <strong>equals</strong> a reference item, </li>
<li>value is <strong>contained</strong> in a set, <strong>contains</strong> a reference item, or is a <strong>sub/superset</strong> of a reference set </li>
<li>value is <strong>greater/smaller</strong> than a reference (strict or not)</li>
<li>value <strong>length</strong> is fixed, or is <strong>greater/smaller</strong> than a reference.</li>
<li>one or several <strong>other</strong> validation functions (custom, 3d party)</li>
</ul>
<p>For example:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">valid8</span> <span class="kn">import</span> <span class="n">validate</span>

<span class="n">surf</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="n">validate</span><span class="p">(</span><span class="s1">&#39;surface&#39;</span><span class="p">,</span> <span class="n">surf</span><span class="p">,</span> <span class="n">instance_of</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">min_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>


<p>results in</p>
<div class="codehilite"><pre><span></span><code>ValidationError<span class="o">[</span>ValueError<span class="o">]</span>: Error validating <span class="o">[</span><span class="nv">surface</span><span class="o">=</span>-1<span class="o">]</span>. <span class="se">\</span>
   TooSmall: x &gt;<span class="o">=</span> <span class="m">0</span> does not hold <span class="k">for</span> <span class="nv">x</span><span class="o">=</span>-1. Wrong value: -1.
</code></pre></div>


<p>Note that the resulting exception object contains much of the available information (<code>var_name</code>, <code>var_value</code>, <code>failure</code>) as fields.</p>
<p>All functions from the built-in validation library are supported as explicit arguments as shown above, so that the method execution is the fastest possible. In addition you can add any other validation function with the <code>custom</code> argument:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">mini_lambda</span> <span class="kn">import</span> <span class="n">x</span>

<span class="n">surf</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">validate</span><span class="p">(</span><span class="s1">&#39;surface&#39;</span><span class="p">,</span> <span class="n">surf</span><span class="p">,</span> <span class="n">instance_of</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">min_value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">custom</span><span class="o">=</span><span class="p">[</span><span class="n">x</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">&lt;</span> <span class="mi">50</span><span class="p">])</span>
</code></pre></div>


<p>yields</p>
<div class="codehilite"><pre><span></span><code>ValidationError[ValueError]: Error validating [surface=20]: \
    validation function [x ** 2 &lt; 50] returned [False].
</code></pre></div>


<p>Here the custom validation function is implemented using <code>mini-lambda</code>, but any function will do ; the only requirement is that your function accepts one positional input and returns <code>True</code> or <code>None</code> in case of success.</p>
<p>You can easily define <em>custom validation functions</em> with composition, custom failure messages or even custom failure types. For example these are accepted:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># custom failure message</span>
<span class="n">validate</span><span class="p">(</span><span class="s1">&#39;surface&#39;</span><span class="p">,</span> <span class="n">surf</span><span class="p">,</span> <span class="n">instance_of</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">min_value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> 
         <span class="n">custom</span><span class="o">=</span><span class="p">[(</span><span class="n">x</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">&lt;</span> <span class="mi">50</span><span class="p">,</span> <span class="s1">&#39;x should be fairly small&#39;</span><span class="p">)])</span>

<span class="c1"># composition with detailed failure messages</span>
<span class="n">validate</span><span class="p">(</span><span class="s1">&#39;surface&#39;</span><span class="p">,</span> <span class="n">surf</span><span class="p">,</span> <span class="n">instance_of</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
         <span class="n">custom</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;x should be fairly small&#39;</span><span class="p">:</span> <span class="n">x</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">&lt;</span> <span class="mi">50</span><span class="p">,</span>
                 <span class="s1">&#39;x should be a multiple of 3&#39;</span><span class="p">:</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">})</span>
</code></pre></div>


<p>See <a href="api_reference/">API reference</a> for usage details, and below <a href="#2-validation-functions">validation functions</a> and <a href="#3-custom-exceptions">validation errors</a> to explore the various customization possibilities. </p>
<h4 id="validatorvalidation"><code>validator</code>/<code>validation</code><a class="headerlink" href="#validatorvalidation" title="Permanent link">&para;</a></h4>
<p>The <code>validator</code> (alias <code>validation</code>) context manager allows you to define the validation procedure yourself, with any statement or function of your choice.</p>
<p>If you rely on <strong>functions that output a boolean flag indicating success</strong> (<em>"boolean testers"</em>), you simply have to plug that flag on the object provided by the context manager, as shown below:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">valid8</span> <span class="kn">import</span> <span class="n">validator</span>

<span class="n">surf</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>

<span class="k">with</span> <span class="n">validator</span><span class="p">(</span><span class="s1">&#39;surface&#39;</span><span class="p">,</span> <span class="n">surf</span><span class="p">)</span> <span class="k">as</span> <span class="n">v</span><span class="p">:</span>
    <span class="n">v</span><span class="o">.</span><span class="n">alid</span> <span class="o">=</span> <span class="n">surf</span> <span class="o">&gt;</span> <span class="mi">0</span>
</code></pre></div>


<p>Which yields</p>
<div class="codehilite"><pre><span></span><code>ValidationError<span class="o">[</span>ValueError<span class="o">]</span>: Error validating <span class="o">[</span><span class="nv">surface</span><span class="o">=</span>-1<span class="o">]</span>:  <span class="se">\</span>
   validation <span class="k">function</span> <span class="o">[</span>v.alid <span class="o">=</span> surf &gt; <span class="m">0</span><span class="o">]</span> returned <span class="o">[</span>False<span class="o">]</span>.
</code></pre></div>


<p>Note that the text of the error displays the source code that led to that failure. </p>
<p>If you rely on <strong>functions that may raise exceptions</strong> (<em>"failure raisers"</em>), <code>validator</code> will catch them and append them as the inner <code>failure</code> of the resulting <code>ValidationError</code>: </p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">isfinite</span>

<span class="n">surf</span> <span class="o">=</span> <span class="mi">1</span><span class="n">j</span>

<span class="k">with</span> <span class="n">validator</span><span class="p">(</span><span class="s1">&#39;surface&#39;</span><span class="p">,</span> <span class="n">surf</span><span class="p">)</span> <span class="k">as</span> <span class="n">v</span><span class="p">:</span>
    <span class="n">v</span><span class="o">.</span><span class="n">alid</span> <span class="o">=</span> <span class="n">surf</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">isfinite</span><span class="p">(</span><span class="n">surf</span><span class="p">)</span>
</code></pre></div>


<p>yields</p>
<div class="codehilite"><pre><span></span><code>ValidationError<span class="o">[</span>TypeError<span class="o">]</span>: Error validating <span class="o">[</span><span class="nv">surface</span><span class="o">=</span>1j<span class="o">]</span>. <span class="se">\</span>
   InvalidType: Function <span class="o">[</span>v.alid <span class="o">=</span> surf &gt; <span class="m">0</span> and isfinite<span class="o">(</span>surf<span class="o">)]</span> raised <span class="se">\</span>
       TypeError: <span class="s1">&#39;&gt;&#39;</span> not supported between instances of <span class="s1">&#39;complex&#39;</span> and <span class="s1">&#39;int&#39;</span>.
</code></pre></div>


<p>With <code>validator</code> you are therefore <strong>guaranteed</strong> that any exception happening in the inner code block will be caught and turned into a friendly <code>ValidationError</code>, whatever the cause (<code>None</code> handling, known validation failures, unknown other errors). You therefore do not have to write the usual <a href="why_validation/#explicit-traditional-way">if/else/try/except wrappers</a> to handle all cases.</p>
<p>A couple important things to note:</p>
<ul>
<li>
<p>the field name where you put the boolean flag does not matter, so if you prefer you can use alternate naming such as <code>with validator(...) as r:</code> and then <code>r.esults =</code></p>
</li>
<li>
<p>there is no <em>need</em> to feed any result to the validator. If you rely on <em>failure raiser</em>-style base functions, for example a <code>check_uniform_sampling</code> or an <code>assert_series_equal</code>, you can just call them and the wrapper will assume that no exception means success. In such case the <code>validation</code> alias might make more sense in terms of readability:</p>
</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="k">with</span> <span class="n">validation</span><span class="p">(</span><span class="s1">&#39;dataframe&#39;</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">instance_of</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
    <span class="n">check_uniform_sampling</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
    <span class="n">assert_series_equal</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">],</span> <span class="n">ref_series</span><span class="p">)</span>
</code></pre></div>


<p><strong>Note on type checking with <code>isinstance</code></strong>
Although you <em>can</em> use the built-in <code>isinstance</code> method inside your validation code block, if you do it <code>valid8</code> will not be able to distinguish between <code>TypeError</code> and <code>ValueError</code>. Instead, please consider either </p>
<ul>
<li>using the <code>instance_of</code> parameter of <code>validation</code>:</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="k">with</span> <span class="n">validator</span><span class="p">(</span><span class="s1">&#39;surface&#39;</span><span class="p">,</span> <span class="n">surf</span><span class="p">,</span> <span class="n">instance_of</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span> <span class="k">as</span> <span class="n">v</span><span class="p">:</span>
    <span class="n">v</span><span class="o">.</span><span class="n">alid</span> <span class="o">=</span> <span class="n">surf</span> <span class="o">&gt;</span> <span class="mi">0</span>
</code></pre></div>


<ul>
<li>or using the <code>assert_instance_of</code> validation method provided for this purpose:</li>
</ul>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">valid8</span> <span class="kn">import</span> <span class="n">assert_instance_of</span><span class="p">,</span> <span class="n">assert_subclass_of</span>

<span class="k">with</span> <span class="n">validator</span><span class="p">(</span><span class="s1">&#39;surface&#39;</span><span class="p">,</span> <span class="n">surf</span><span class="p">)</span> <span class="k">as</span> <span class="n">v</span><span class="p">:</span>
    <span class="n">assert_instance_of</span><span class="p">(</span><span class="n">surf</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
    <span class="n">v</span><span class="o">.</span><span class="n">alid</span> <span class="o">=</span> <span class="n">surf</span> <span class="o">&gt;</span> <span class="mi">0</span>
</code></pre></div>


<p>See <a href="api_reference/">API reference</a> for usage details, and below <a href="#2-validation-functions">validation functions</a> and <a href="#3-custom-exceptions">custom exceptions</a> to explore the various customization possibilities. </p>
<h3 id="b-functions">b - functions<a class="headerlink" href="#b-functions" title="Permanent link">&para;</a></h3>
<p>The <code>@validate_arg</code> decorator adds input validation to a function. Here is an example where we decorate a <code>build_house</code> function:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">mini_lambda</span> <span class="kn">import</span> <span class="n">s</span><span class="p">,</span> <span class="n">Len</span>
<span class="kn">from</span> <span class="nn">valid8</span> <span class="kn">import</span> <span class="n">validate_arg</span>
<span class="kn">from</span> <span class="nn">valid8.validation_lib</span> <span class="kn">import</span> <span class="n">instance_of</span>

<span class="nd">@validate_arg</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">instance_of</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span> <span class="n">Len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> 
              <span class="n">help_msg</span><span class="o">=</span><span class="s1">&#39;name should be a non-empty string&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">build_house</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">surface</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Building house... DONE !&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">name</span><span class="p">,</span> <span class="n">surface</span>
</code></pre></div>


<p>As you can see above, any number of base validation functions can be provided to the decorator - this will correspond to an implicit <code>and_</code> being performed, equivalent to one that you would have done with the built-in <a href="validation_funcs/d_composition/">composition framework</a>. Here we validate the input argument <code>name</code> by chaining the function <code>instance_of(str)</code> (from the built-in <a href="validation_funcs/b_base_validation_lib/">validation functions library</a>) with a custom lambda function <code>Len(s) &gt; 0</code> created using the <a href="https://smarie.github.io/python-mini-lambda/"><code>mini_lambda</code></a> syntax. </p>
<p>Let's try it:</p>
<div class="codehilite"><pre><span></span><code>&gt; build_house<span class="o">(</span><span class="s1">&#39;sweet home&#39;</span>, <span class="m">200</span><span class="o">)</span>    <span class="c1"># Valid</span>

&gt; build_house<span class="o">(</span><span class="s1">&#39;&#39;</span>, <span class="m">200</span><span class="o">)</span>
InputValidationError<span class="o">[</span>ValueError<span class="o">]</span>: name should be a non-empty string. <span class="se">\</span>
   Error validating input <span class="o">[</span><span class="nv">name</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">]</span> <span class="k">for</span> <span class="k">function</span> <span class="o">[</span>build_house<span class="o">]</span>. <span class="se">\</span>
   At least one validation <span class="k">function</span> failed <span class="k">for</span> value <span class="s1">&#39;&#39;</span>. <span class="se">\</span>
     Successes: <span class="o">[</span><span class="s2">&quot;instance_of_&lt;class &#39;str&#39;&gt;&quot;</span><span class="o">]</span> <span class="se">\</span>
      / Failures: <span class="o">{</span><span class="s1">&#39;len(s) &gt; 0&#39;</span>: <span class="s1">&#39;Returned False.&#39;</span><span class="o">}</span>.
</code></pre></div>


<p>We can see in this verbose exception all details of interest: first the custom <code>help_msg</code>; then the validated function and input name; and finally the composition failure resulting from one of the two base functions failing (<code>len(s) &gt; 0</code> as stated). <em>Note that since <code>Len</code> is <code>mini_lambda</code>'s equivalent of <code>len</code>, the string representation is lowercase</em></p>
<p>The <code>@validate_out</code> function decorator works the same way for output validation, except that you don't provide it with any name. </p>
<h4 id="nonable-inputsoutputs">nonable inputs/outputs<a class="headerlink" href="#nonable-inputsoutputs" title="Permanent link">&para;</a></h4>
<p>Here is a more complete example with both input and output validation:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">mini_lambda</span> <span class="kn">import</span> <span class="n">s</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="n">Len</span>
<span class="kn">from</span> <span class="nn">valid8</span> <span class="kn">import</span> <span class="n">validate_arg</span><span class="p">,</span> <span class="n">validate_out</span>
<span class="kn">from</span> <span class="nn">valid8.validation_lib</span> <span class="kn">import</span> <span class="n">instance_of</span><span class="p">,</span> <span class="n">is_multiple_of</span>

<span class="nd">@validate_arg</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">instance_of</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span> <span class="n">Len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span>
              <span class="n">help_msg</span><span class="o">=</span><span class="s1">&#39;name should be a non-empty string&#39;</span><span class="p">)</span>
<span class="nd">@validate_arg</span><span class="p">(</span><span class="s1">&#39;surface&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">10000</span><span class="p">),</span> <span class="n">is_multiple_of</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
              <span class="n">help_msg</span><span class="o">=</span><span class="s1">&#39;Surface should be a multiple of 100 between 0 and 10000.&#39;</span><span class="p">)</span>
<span class="nd">@validate_out</span><span class="p">(</span><span class="n">instance_of</span><span class="p">(</span><span class="nb">tuple</span><span class="p">),</span> <span class="n">Len</span><span class="p">(</span><span class="n">l</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">build_house</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">surface</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Building house... DONE !&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">name</span><span class="p">,</span> <span class="n">surface</span>
</code></pre></div>


<p>Something surprising happens:</p>
<div class="codehilite"><pre><span></span><code>&gt; build_house<span class="o">(</span>None<span class="o">)</span>
InputValidationError<span class="o">[</span>TypeError<span class="o">]</span>: name should be a non-empty string. <span class="se">\</span>
   Error validating input <span class="o">[</span><span class="nv">name</span><span class="o">=</span>None<span class="o">]</span> ...

&gt; build_house<span class="o">(</span><span class="s1">&#39;sweet home&#39;</span><span class="o">)</span>         <span class="c1"># No error !</span>
&gt; build_house<span class="o">(</span><span class="s1">&#39;sweet home&#39;</span>, None<span class="o">)</span>   <span class="c1"># No error !</span>
</code></pre></div>


<p>No error is raised when <code>surface</code> is <code>None</code>, while our base validation functions should both fail in presence of <code>None</code>:</p>
<div class="codehilite"><pre><span></span><code>&gt; is_multiple_of<span class="o">(</span><span class="m">100</span><span class="o">)(</span>None<span class="o">)</span>   
TypeError: unsupported operand type<span class="o">(</span>s<span class="o">)</span> <span class="k">for</span> %: <span class="s1">&#39;NoneType&#39;</span> and <span class="s1">&#39;int&#39;</span>

&gt; <span class="o">(</span>Len<span class="o">(</span>s<span class="o">)</span> &gt; <span class="m">0</span><span class="o">)</span>.evaluate<span class="o">(</span>None<span class="o">)</span>
TypeError: object of <span class="nb">type</span> <span class="s1">&#39;NoneType&#39;</span> has no len<span class="o">()</span>
</code></pre></div>


<p>Indeed, by default <code>None</code> values have a special validation procedure depending on the function signature: </p>
<ul>
<li>
<p>if the input to validate has a default value of <code>None</code>it is considered <strong><em>nonable</em></strong>. For this input, <code>None</code> values will <strong>not</strong> enter the validation procedure, and be sent directly to the function. In other words validation is skipped for <code>None</code>. The same principle goes for inputs and outputs that have a PEP484 <code>Optional[...]</code> type hint, with or without default value.</p>
</li>
<li>
<p>in the absence of <code>None</code> default value or <code>Optional[...]</code> type hint, the input or output is considered <strong><em>normal</em></strong>. <code>None</code> values will be send to the validation function as usual, as it would be for non-<code>None</code> values</p>
</li>
</ul>
<p>The default behaviour described above may not suit your needs, and can be changed by changing the <code>none_policy</code> keyword argument. Valid values are:</p>
<ul>
<li><code>NonePolicy.SKIP_IF_NONABLE_ELSE_VALIDATE</code>: the default behaviour described above</li>
<li><code>NonePolicy.SKIP_IF_NONABLE_ELSE_FAIL</code>: same than the above, except that for <strong><em>normal</em></strong> inputs and outputs, <code>None</code> values will be rejected automatically - no need to test for <code>None</code> in your validation function.</li>
<li><code>NonePolicy.SKIP</code>: validation will always be skipped for <code>None</code> values</li>
<li><code>NonePolicy.FAIL</code>: validation will always fail for <code>None</code> values</li>
<li><code>NonePolicy.VALIDATE</code>: validation will always be performed even for <code>None</code> values</li>
</ul>
<p>See <a href="api_reference/">API reference</a> for usage details, and below <a href="#2-validation-functions">validation functions</a> and <a href="#3-custom-exceptions">custom exceptions</a> to explore the various customization possibilities. </p>
<h3 id="c-class-fields">c - class fields<a class="headerlink" href="#c-class-fields" title="Permanent link">&para;</a></h3>
<p>If you use <code>pyfields</code> to define your classes, <code>valid8</code> is already embedded in the <code>field()</code> method: you should rather look <a href="valid8_with_other/#pyfields">here</a>. Otherwise (for normal classes or classes with <code>attrs</code>, <code>autoclass</code>...) continue reading.</p>
<p>The <code>@validate_field</code> decorator adds field validation to a class. It is able to validate a field if the field is:</p>
<ul>
<li>
<p>a <a href="https://docs.python.org/3.6/howto/descriptor.html#descriptor-example">descriptor</a> - in which case it is equivalent to a <code>@validate_arg</code> added on the <code>__set__</code> function of the descriptor, but with a more user-friendly error message</p>
</li>
<li>
<p>a <a href="https://docs.python.org/3.6/howto/descriptor.html#properties">property</a>, in which case it is equivalent to a <code>@validate_arg</code> added on the <code>fset</code> function of the descriptor, but with a more user-friendly error message.</p>
</li>
<li>
<p>or a <em>constructor input</em>, in which case it is equivalent to a <code>@validate_arg</code> added on the constructor. In such case <strong>WARNING</strong> validation will only be called at initial object creation, not at subsequent field modifications!</p>
</li>
</ul>
<p>Here is an example where we add validation to a <code>House</code> class with two fields:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">valid8</span> <span class="kn">import</span> <span class="n">validate_field</span>
<span class="kn">from</span> <span class="nn">valid8.validation_lib</span> <span class="kn">import</span> <span class="n">instance_of</span><span class="p">,</span> <span class="n">is_multiple_of</span>
<span class="kn">from</span> <span class="nn">mini_lambda</span> <span class="kn">import</span> <span class="n">x</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">Len</span>

<span class="nd">@validate_field</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">instance_of</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span> <span class="n">Len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span>
                <span class="n">help_msg</span><span class="o">=</span><span class="s1">&#39;name should be a non-empty string&#39;</span><span class="p">)</span>
<span class="nd">@validate_field</span><span class="p">(</span><span class="s1">&#39;surface&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">10000</span><span class="p">),</span> <span class="n">is_multiple_of</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
                <span class="n">help_msg</span><span class="o">=</span><span class="s1">&#39;Surface should be a multiple of100 between 0 and 10000&#39;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">House</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">surface</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">surface</span> <span class="o">=</span> <span class="n">surface</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">surface</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__surface</span>

    <span class="nd">@surface</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">surface</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">surface</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__surface</span> <span class="o">=</span> <span class="n">surface</span>
</code></pre></div>


<p>Let's try it:</p>
<div class="codehilite"><pre><span></span><code>&gt; <span class="nv">h</span> <span class="o">=</span> House<span class="o">(</span><span class="s1">&#39;sweet home&#39;</span><span class="o">)</span>  <span class="c1"># valid</span>

&gt; <span class="nv">h</span> <span class="o">=</span> House<span class="o">(</span><span class="s1">&#39;&#39;</span><span class="o">)</span>
ClassFieldValidationError<span class="o">[</span>ValueError<span class="o">]</span>: name should be a non-empty string. <span class="se">\</span>
   Error validating field <span class="o">[</span><span class="nv">name</span><span class="o">=]</span> <span class="k">for</span> class <span class="o">[</span>House<span class="o">]</span>. <span class="se">\</span>
   At least one validation <span class="k">function</span> failed <span class="k">for</span> value <span class="s1">&#39;&#39;</span>. <span class="se">\</span>
      Successes: <span class="o">[</span><span class="s2">&quot;instance_of_&lt;class &#39;str&#39;&gt;&quot;</span><span class="o">]</span> / Failures: <span class="o">{</span><span class="s1">&#39;len(s) &gt; 0&#39;</span>: <span class="s1">&#39;False&#39;</span><span class="o">}</span>

&gt; h.surface <span class="o">=</span> <span class="m">10000</span>
ClassFieldValidationError<span class="o">[</span>ValueError<span class="o">]</span>: Surface should be a multiple of <span class="m">100</span> between <span class="m">0</span> and <span class="m">10000</span>
   Error validating field <span class="o">[</span><span class="nv">surface</span><span class="o">=</span><span class="m">10000</span><span class="o">]</span> <span class="k">for</span> class <span class="o">[</span>House<span class="o">]</span>. <span class="se">\</span>
   At least one validation <span class="k">function</span> failed <span class="k">for</span> value <span class="m">10000</span>. <span class="se">\</span>
      Successes: <span class="o">[</span><span class="s1">&#39;is_multiple_of_100&#39;</span><span class="o">]</span> <span class="se">\</span>
        / Failures: <span class="o">{</span><span class="s1">&#39;(x &gt;= 0) &amp; (x &lt; 10000)&#39;</span>: <span class="s1">&#39;False&#39;</span><span class="o">}</span>.

&gt; h.name <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="c1"># WARNING: does not raise ValidationError (no setter!)</span>
</code></pre></div>


<p>For classes using <code>attrs</code> or <code>autoclass</code>, it <a href="valid8_with_other/#for-classes">works too</a>.</p>
<p>As for functions, the default none policy is <code>SKIP_IF_NONABLE_ELSE_VALIDATE</code> but can be changed similarly to what we described in <a href="#b-functions">previous section</a></p>
<p>See <a href="api_reference/">API reference</a> for usage details, and below <a href="#2-validation-functions">validation functions</a> and <a href="#3-custom-exceptions">custom exceptions</a> to explore the various customization possibilities. </p>
<h2 id="2-validation-functions">2. Validation functions<a class="headerlink" href="#2-validation-functions" title="Permanent link">&para;</a></h2>
<p>We have seen above that all entry point validators (inline, function, class) provide a way for you to declare custom validation functions to use. Here are the resources that will get you started:</p>
<ul>
<li>
<p>in <a href="validation_funcs/a_basics/">validation function basics</a> you will learn what is required to integrate any function, and how to improve existing functions</p>
</li>
<li>
<p>you can browse the bundled <a href="validation_funcs/b_base_validation_lib/">validation functions library</a> to find some common functions to reuse</p>
</li>
<li>
<p>as we already saw above, the <a href="https://smarie.github.io/python-mini-lambda/"><code>mini_lambda</code></a> syntax can be used to define some validation functions inline (such as <code>x &gt; 0</code>) without writing <code>lambda x:</code>.</p>
</li>
<li>
<p>make sure that you check the <a href="validation_funcs/c_simple_syntax/">simple definition syntax</a>. With it you will be able to easily define advanced validation functions.</p>
</li>
<li>
<p>the bundled <a href="validation_funcs/d_composition/">composition functions</a> can optionally be used to create more complex combinations than "and".</p>
</li>
</ul>
<h2 id="3-custom-exceptions">3. Custom exceptions<a class="headerlink" href="#3-custom-exceptions" title="Permanent link">&para;</a></h2>
<p>Various options are provided to customize the raised exception. These options are available on all entry points: both on <code>validate</code>, <code>validator</code>/<code>validation</code>, <code>@validate_arg</code>, <code>@validate_out</code>, <code>@validate_io</code> and <code>@validate_field</code>. </p>
<h3 id="a-custom-message">a - custom message<a class="headerlink" href="#a-custom-message" title="Permanent link">&para;</a></h3>
<p>You can specify a custom error message that will be displayed at the beginning of the default message:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">valid8</span> <span class="kn">import</span> <span class="n">validation</span>

<span class="k">with</span> <span class="n">validation</span><span class="p">(</span><span class="s1">&#39;surface&#39;</span><span class="p">,</span> <span class="n">surf</span><span class="p">,</span> 
                <span class="n">help_msg</span><span class="o">=</span><span class="s2">&quot;Surface should be a finite positive integer&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">v</span><span class="p">:</span>
    <span class="n">v</span><span class="o">.</span><span class="n">alid</span> <span class="o">=</span> <span class="n">surf</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">isfinite</span><span class="p">(</span><span class="n">surf</span><span class="p">)</span>
</code></pre></div>


<p>yields for <code>surf = -1</code></p>
<div class="codehilite"><pre><span></span><code>ValidationError<span class="o">[</span>ValueError<span class="o">]</span>: Surface should be a finite positive integer. <span class="se">\</span>
    Error validating <span class="o">[</span><span class="nv">surface</span><span class="o">=</span>-1<span class="o">]</span>: <span class="se">\</span>
    validation <span class="k">function</span> <span class="o">[</span>v.alid <span class="o">=</span> surf &gt; <span class="m">0</span> and isfinite<span class="o">(</span>surf<span class="o">)]</span> returned <span class="o">[</span>False<span class="o">]</span>.
</code></pre></div>


<h3 id="b-custom-type">b - custom type<a class="headerlink" href="#b-custom-type" title="Permanent link">&para;</a></h3>
<p>Or even better, a custom error type, which is a good practice to ease internationalization (unique applicative error codes). The base <code>ValidationError</code> class provides default behaviours allowing you to define subclasses in a quite compact form:</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span> <span class="nn">valid8</span> <span class="kn">import</span> <span class="n">ValidationError</span><span class="p">,</span> <span class="n">validate</span>

<span class="k">class</span> <span class="nc">InvalidSurface</span><span class="p">(</span><span class="n">ValidationError</span><span class="p">):</span>
    <span class="n">help_msg</span> <span class="o">=</span> <span class="s1">&#39;Surface should be a positive integer&#39;</span>

<span class="n">validate</span><span class="p">(</span><span class="s1">&#39;surface&#39;</span><span class="p">,</span> <span class="n">surf</span><span class="p">,</span> <span class="n">instance_of</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">min_value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> 
            <span class="n">error_type</span><span class="o">=</span><span class="n">InvalidSurface</span><span class="p">)</span>
</code></pre></div>


<p>yields for <code>surf = -1</code></p>
<div class="codehilite"><pre><span></span><code>InvalidSurface<span class="o">[</span>ValueError<span class="o">]</span>: Surface should be a positive integer. <span class="se">\</span>
   Error validating <span class="o">[</span><span class="nv">surface</span><span class="o">=</span>-1<span class="o">]</span>. <span class="se">\</span>
   TooSmall: x &gt;<span class="o">=</span> <span class="m">0</span> does not hold <span class="k">for</span> <span class="nv">x</span><span class="o">=</span>-1. Wrong value: -1.
</code></pre></div>


<p>Note that for function entry points, the custom type should inherit from <code>InputValidationError</code> or <code>OutputValidationError</code> respectively. For class entry points, the custom type should inherit from <code>ClassFieldValidationError</code>.</p>
<h3 id="c-message-templating">c - message templating<a class="headerlink" href="#c-message-templating" title="Permanent link">&para;</a></h3>
<p>Finally, the <code>help_msg</code> field acts as a string template that will receive any additional keyword argument thrown at the validation method. So you can define reusable error classes without too much hassle:</p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">InvalidSurface</span><span class="p">(</span><span class="n">ValidationError</span><span class="p">):</span>
    <span class="n">help_msg</span> <span class="o">=</span> <span class="s1">&#39;Surface should be &gt; </span><span class="si">{minimum}</span><span class="s1">, found </span><span class="si">{var_value}</span><span class="s1">&#39;</span>

<span class="n">validate</span><span class="p">(</span><span class="s1">&#39;surface&#39;</span><span class="p">,</span> <span class="n">surf</span><span class="p">,</span> <span class="n">instance_of</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">min_value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> 
         <span class="n">error_type</span><span class="o">=</span><span class="n">InvalidSurface</span><span class="p">,</span> <span class="n">minimum</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>


<p>yields</p>
<div class="codehilite"><pre><span></span><code>InvalidSurface<span class="o">[</span>ValueError<span class="o">]</span>: Surface should be &gt; <span class="m">0</span>, found -1. <span class="se">\</span>
   Error validating <span class="o">[</span><span class="nv">surface</span><span class="o">=</span>-1<span class="o">]</span>. <span class="se">\</span>
   TooSmall: x &gt;<span class="o">=</span> <span class="m">0</span> does not hold <span class="k">for</span> <span class="nv">x</span><span class="o">=</span>-1. Wrong value: -1.
</code></pre></div>


<p>Note: as shown in that last example, the value being validated is already sent to the help message string to format under the <code>'var_value'</code> key, so you do not need to pass it. </p>
<p>Obviously you can further customize your exception subclasses if you wish.</p>
<h4 id="d-typeerror-or-valueerror">d - <code>TypeError</code> or <code>ValueError</code><a class="headerlink" href="#d-typeerror-or-valueerror" title="Permanent link">&para;</a></h4>
<p><code>ValidationError</code> does not by default inherit from <code>TypeError</code> or <code>ValueError</code>, because in the general case, <code>valid8</code> has no means of knowing. But you may have noticed in all of the output message examples shown above that one of the two is still appearing each time in the resulting exception. This is because <code>valid8</code> automatically guesses: when a validation error happens, it recursively looks at the type of the failure cause for a <code>TypeError</code> or <code>ValueError</code> (default if nothing is found). It then <strong>dynamically</strong> creates an appropriate exception type inheriting both from <code>ValidationError</code> and from either <code>TypeError</code> or <code>ValueError</code> according to what has been found. This dynamic type is cached for speed considerations. It has some custom display methods that make it appear as follows:</p>
<div class="codehilite"><pre><span></span><code>&gt; validate<span class="o">(</span><span class="s1">&#39;surface&#39;</span>, -1, <span class="nv">instance_of</span><span class="o">=</span>int, <span class="nv">min_value</span><span class="o">=</span><span class="m">0</span><span class="o">)</span>
ValidationError<span class="o">[</span>ValueError<span class="o">]</span>

&gt; validate<span class="o">(</span><span class="s1">&#39;surface&#39;</span>, 1j, <span class="nv">instance_of</span><span class="o">=</span>int, <span class="nv">min_value</span><span class="o">=</span><span class="m">0</span><span class="o">)</span>
ValidationError<span class="o">[</span>TypeError<span class="o">]</span>
</code></pre></div>


<p>If you do not wish the automatic guessing to happen, you can always declare the inheritance explicitly by creating custom subclasses inheriting from the one of your choice, or both:</p>
<div class="codehilite"><pre><span></span><code><span class="k">class</span> <span class="nc">InvalidSurface</span><span class="p">(</span><span class="n">ValidationError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">):</span>
    <span class="n">help_msg</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</code></pre></div>


<p>If you create a custom subclass but do not inherit from <code>TypeError</code> nor <code>ValueError</code>, the automatic guessing will take place as usual.</p>
<h2 id="main-features">Main features<a class="headerlink" href="#main-features" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p><strong>Separation of validation intent</strong> (entry points <code>validate</code>, <code>validator</code>, <code>@validate_arg</code>...) <strong>from validation means</strong> (base validation code / functions). Entry points provide a clear and consistent behaviour matching your applicative intent, hiding the diversity of base validation functions that you rely on to do it.</p>
</li>
<li>
<p>Clear entry points to <strong>serve most common needs</strong> related with validation:</p>
<ul>
<li>
<p><em>Inline validation</em>: two functions <code>validate</code> and <code>validator</code>/<code>validation</code> to perform validation anywhere in your code.</p>
</li>
<li>
<p><em>Function validation</em>: two decorators <code>@validate_arg</code> and <code>@validate_out</code>, as well as a more limited <code>@validate_io</code>, to add input and output validation to any function. A manual decorator <code>decorate_with_validation</code> provides the same functionality for retrofit purposes.</p>
</li>
<li>
<p><em>Class validation</em>: one decorator <code>@validate_field</code> to add validation to class fields.</p>
</li>
</ul>
</li>
<li>
<p><strong>Consistent behaviour</strong>: all defensive mode entry points provide the same behaviour, raising subclasses of <code>ValidationError</code> in case of failure, whatever the diversity of failure modes that can happen in base validation code. The exception object contains all contextual information in its fields so as to be easily usable by a global exception handler at application-level, for example for internationalization. Moreover, the appropriate <code>TypeError</code> or <code>ValueError</code> base class is dynamically added to the resulting exception type if not present already. Consistency is also ensured by the fact that all entry points rely on a common <code>Validator</code> class.</p>
</li>
<li>
<p><strong>Highly customizable</strong>: all entry points can be customized so as to fit your application needs. In particular you probably do not want users to see <code>valid8</code> exceptions and messages, but rather <em>your</em> exceptions and messages. This is easy to do with the two <code>help_msg</code> and <code>error_type</code> options.</p>
</li>
<li>
<p><strong>python-first, not schema-first</strong>. This library is intended to provide validation anywhere in your code, not only when data enters a web service, a CLI or a form. There already are <a href="other_libs/#validation-of-data-at-the-applications-entry-point">libs out there</a> for that purpose. <code>valid8</code> is rather meant to be as simple as possible and as open as possible to any kind of validation, even those that can not easily be described in a schema.</p>
</li>
<li>
<p><strong>Separation of <em>value</em> validation from <em>type</em> validation is possible</strong>. <code>valid8</code> can be <a href="valid8_with_other#pep484-type-checkers">combined</a> with any PEP484-based type validation library such as <code>enforce</code> or <code>pytypes</code>.</p>
</li>
<li>
<p><strong>Plays well with <a href="valid8_with_other/#pyfields">pyfields</a>, <a href="valid8_with_other/#autoclass">autoclass</a> and <a href="valid8_with_other/#attrs">attrs</a></strong>. Declare validation once by annotating the class with <code>@validate_field</code>, and you're good to go!</p>
</li>
</ul>
<p><strong>validation functions</strong></p>
<ul>
<li>
<p><strong>Compliant with <a href="accepted">most</a> base validation functions out there</strong>. You may use base validation functions from anywhere including your own, and including <code>functools.partial</code>, <code>lambda</code> or even callable objects implementing the <code>__call__</code> magic method. The <em>only</em> requirement is that they return <code>True</code> or <code>None</code> in case of success ! The way they fail is not important, <code>valid8</code> tolerates all. If you wish to create your own, you can leverage the three <a href="accepted#built-in-exceptions">exception classes</a> provided. </p>
</li>
<li>
<p><strong>Built-in <a href="base_validation_lib">library</a> of base validation functions</strong>, by object type. Do not hesitate to contribute! Also, do not hesitate to rely on other libraries for dedicated object types such as <a href="other_libs#domain-specific-validators-validators-for-specific-data-types-validators-without-framework">these</a>, or to build your own !</p>
</li>
<li>
<p><strong>Built-in support for <a href="https://smarie.github.io/python-mini-lambda/">mini_lambda</a></strong> to define base validation functions for the decorators, so that you do not need to write <code>lambda x:</code> everywhere, and the failure messages are far more easy to read. Besides the global error customization as well as <strong>built-in syntax for <a href="#d-advanced-composition">failure raiser definition</a></strong> allows you to easily add exception details to lambda expressions.</p>
</li>
<li>
<p><strong>Built-in composition framework</strong>. Built-in functions <code>and_</code>, <code>or_</code>, <code>xor_</code>, <code>not_</code>, <code>not_all</code>, <code>failure_raiser</code>, <code>skip_on_none</code> and <code>fail_on_none</code> allow you to quickly create complex validation functions by reusing simpler ones, if you do not want to do it using <code>lambda</code> or <code>mini_lambda</code>. In particular, <code>and_</code> is implicitly used if you provide a list of base validation functions to any of the <code>valid8</code> decorators.</p>
</li>
</ul>
<h2 id="other-validation-libraries">Other Validation libraries<a class="headerlink" href="#other-validation-libraries" title="Permanent link">&para;</a></h2>
<p>Many validation libraries are available on <a href="https://pypi.python.org/pypi?%3Aaction=search&amp;term=valid&amp;submit=search">PyPI</a> already. The following <a href="other_libs">list</a> is by far not exhaustive, but gives an overview. Do not hesitate to contribute to this list with a pull request! </p>
<h2 id="origin-of-this-project">Origin of this project<a class="headerlink" href="#origin-of-this-project" title="Permanent link">&para;</a></h2>
<p>When it all started, I was just looking for a library providing a <code>@validate</code> annotation with a basic library of validators and some logic to associate them, so as to complete <a href="https://smarie.github.io/python-autoclass/">autoclass</a>. I searched and found tons of good and less good libraries <a href="#other-validation-libraries">out there</a>. However none of them was really a good fit for <code>autoclass</code>, for diverse reasons:</p>
<ul>
<li>only a few of them were available as decorators</li>
<li>many of them were strongly mixing type validation and value validation, which is not necessary anymore thanks to PEP484. This was making the <code>autoclass</code> examples more confusing.</li>
<li>only a few of them were providing a simple yet consistent and reusable framework to deal with validation functions, combine them, etc. And the good ones were based on defining a Schema first, which seemed a bit 'too much' for me already.</li>
<li>finally, none of them was really encouraging the community to collaborate by displaying a catalog of base validation functions per data type, open to contributions.</li>
</ul>
<p>So I first created the <code>@validate</code> goodie in <a href="https://smarie.github.io/python-autoclass/">autoclass</a>. When the project became more mature, I decided to extract it and make it independent, so that maybe the community will find it interesting. </p>
<p>When this project grew, I found that its <a href="validation_funcs/b_base_validation_lib/">embedded library of base validation functions</a> was not flexible enough to cover a large variety of use cases, and will probably <strong>never</strong> be even if we try our best, so I came up with the complementary <a href="https://smarie.github.io/python-mini-lambda/">mini_lambda syntax</a> which is now an independent project, typically used when your base validation function is very specific, but yet quite simple to write in plain python.</p>
<p>Later on I decided to create a better alternative to <code>autoclass</code>, named <a href="https://smarie.github.io/python-pyfields/"><code>pyfields</code></a>. This challenged the <code>valid8</code> project once again to be simple, clear, and extensible. This gave version <code>5.0.0</code>.</p>
<h2 id="see-also">See Also<a class="headerlink" href="#see-also" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>We had this <a href="https://groups.google.com/forum/#!topic/python-ideas/ZSp9UKmnF2Q">discussion on python-ideas</a> to suggest a <code>validate</code> statement, functional equivalent of <code>assert_valid</code>, that would be built-in the python syntax so as to reduce parenthesis. An <a href="https://bugs.python.org/issue32590">issue</a> was also created.</p>
</li>
<li>
<p>Julien Danjou's <a href="https://julien.danjou.info/blog/2016/python-exceptions-guide">Definitive Guide to Python Exceptions</a>. It was of great inspiration and help to design <code>valid8</code>'s exception hierarchy.</p>
</li>
</ul>
<p><em>Do you like this library ? You might also like <a href="https://github.com/smarie/OVERVIEW#python">my other python libraries</a></em> </p>
<h2 id="want-to-contribute">Want to contribute ?<a class="headerlink" href="#want-to-contribute" title="Permanent link">&para;</a></h2>
<p>Details on the github page: <a href="https://github.com/smarie/python-valid8">https://github.com/smarie/python-valid8</a></p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
        
          <a href="why_validation/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Why validation
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="assets/javascripts/vendor.53cc9318.min.js"></script>
      <script src="assets/javascripts/bundle.e9c9f54f.min.js"></script><script id="__lang" type="application/json">{"search.result.one": "1 matching document", "search.result.placeholder": "Type to start searching", "search.result.other": "# matching documents", "search.config.lang": "en", "search.result.none": "No matching documents", "clipboard.copied": "Copied to clipboard", "search.config.separator": "[\\s\\-]+", "clipboard.copy": "Copy to clipboard", "search.placeholder": "Search", "search.result.term.missing": "Missing", "search.result.more.other": "# more on this page", "search.config.pipeline": "trimmer, stopWordFilter", "search.result.more.one": "1 more on this page"}</script>
      
      <script>
        app = initialize({
          base: ".",
          features: [],
          search: Object.assign({
            worker: "assets/javascripts/worker/search.9c0e82ba.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>